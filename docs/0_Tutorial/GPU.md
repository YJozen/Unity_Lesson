描画の仕組みを理解するには、まず基本的なコンピュータグラフィックスの流れとGPU（グラフィックス処理ユニット）について知る必要があります。ここでは、GPUの役割と、CPUとGPUがどのように協力してゲームやアプリケーションのグラフィックスを描画しているのかについて説明します。

### GPUとは？
**GPU（Graphics Processing Unit）** は、コンピュータの中で**グラフィックス処理**を専門的に担当するハードウェアです。特に、3Dグラフィックスの描画や、大量のデータを並列に処理するタスクに優れています。元々は2D・3Dグラフィックスの描画を高速化するために作られたもので、現在ではゲームやVR、機械学習などにも利用されています。

### GPUの役割
CPU（中央処理装置）はあらゆる処理を行う汎用的なプロセッサですが、GPUは特に**並列処理**に特化しており、膨大な量のデータを同時に処理することが得意です。グラフィックス処理には、大量のピクセルや頂点を扱うため、この並列処理が非常に有効です。

具体的に、GPUは以下のようなタスクを処理します：
- **頂点処理**（3Dモデルの各点の計算）
- **ピクセル処理**（テクスチャやカラーの計算）
- **シェーダー**（物理法則や視覚効果の計算）
- **ライティング**（光と影の計算）

### GPUを使った描画の流れ

グラフィックス描画は**パイプライン**という一連の処理の流れで行われます。このパイプラインを経由して、モデル（メッシュ）やテクスチャなどがGPUに送られ、画面に表示されます。

#### 1. **CPUからの命令**
描画のプロセスは、まず**CPU**から始まります。ゲームやアプリケーション内で、何を描画するか（3Dモデル、テクスチャ、シーン全体の情報など）を計算し、これを**GPUに命令として送信**します。ここで重要なのが、先ほど触れた**バッチ**や**ドローコール（Draw Call）**です。

- **Draw Call**とは、CPUがGPUに「これを描画してね」と送る命令です。
- CPUは、シーン内の各オブジェクトやモデルの情報を集め、1回のDraw CallごとにGPUへ送信します。複数のオブジェクトをまとめて送ることで、パフォーマンスを向上させます（バッチング）。

#### 2. **頂点処理**
GPUはまず、**頂点シェーダー**を使って3Dオブジェクトの頂点（3D空間の座標情報）を処理します。頂点シェーダーは、オブジェクトがどこに存在し、どのように表示されるべきかを計算します。

このプロセスでは、モデルの位置、回転、スケールの変換や、カメラの位置による見え方（視野の設定）などが行われます。最終的に、3D座標から**2Dスクリーン空間**に変換されます（**プロジェクション変換**）。

#### 3. **ラスタライズ**
次に、頂点からなる三角形を**ラスタライズ**します。ラスタライズとは、頂点シェーダーで計算された3Dモデルの情報を、画面上のピクセルに変換するプロセスです。

- ラスタライズの結果、2D画面上に表示するピクセルごとに対応するテクスチャの色やライティングの情報が計算されます。

#### 4. **ピクセル処理（フラグメントシェーダー）**
**ピクセルシェーダー**（フラグメントシェーダーとも呼ばれる）は、ラスタライズされたピクセルごとの**色やテクスチャの情報**を計算します。テクスチャの適用や光と影、反射などの視覚効果はこの段階で計算されます。

- ライティング効果（光源の位置、影の投影）
- テクスチャマッピング（メッシュに画像を貼り付ける）
- 反射、屈折などの特殊効果

#### 5. **出力合成**
最終的に、各ピクセルの色やライティング効果が計算された後、それを画面に表示するための**フレームバッファ**に書き込まれます。ここで、すべての描画データが一つの画像として統合され、ディスプレイに表示されます。

### まとめ：CPUとGPUの協力
1. **CPU**はゲームのロジックや物理計算を行い、GPUに「何を描画するか」を命令します（Draw Call）。
2. **GPU**は、その命令に基づいて**3Dモデルを頂点シェーダーで計算し**、その後、ラスタライズを経て**ピクセルシェーダー**で色やテクスチャ、ライティングなどを処理します。
3. 最終的に、描画結果が画面に表示されます。

GPUは描画処理を非常に効率的に行うため、ゲームや3Dアプリケーションにおいて不可欠な存在です。CPUが指示を出し、GPUがそれに従って膨大な計算を並列処理することで、リアルタイムで美しいグラフィックスが描画される仕組みです。