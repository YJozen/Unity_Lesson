複数人で同時に作業することを想定した書き方をしています。  
１人で取り組む場合は、複数のローカルリポジトリを作って作業する形になります。


# チーム

### チーム設定について

リポジトリから、Settingsに入り、Collaboratosを選択し、Manage access欄にて「Add people」からチームメンバーの追加を行って下さい

<img src="images/2_0_team_settings.png" width="70%" alt="" title="">

<br>


# ブランチ

ここまでは、編集履歴を1本の流れのように扱ってきました。

しかし、ブランチ機能を使うと、編集履歴の流れを分岐させることができます。

たとえば、アイデアAとアイデアBのどちらを採用すべきか悩むような場面はよくあります。そんなときに、ブランチは効果を発揮します。

<img src="images/2_1.png" width="70%" alt="" title="">

<br>

例えば、mainブランチから2つのブランチを作ります。

+ feature/try-idea-a : アイデアAを試すためのブランチ  
+ feature/try-idea-b : アイデアBを試すためのブランチ  

図は右に行くほど、新しいコミットになります。

それぞれ、実際にファイルを編集しますが、mainブランチに影響はありません。

「実際に試してみたら、アイデアBがよさそう」となったら、 feature/try-idea-b ブランチを main ブランチに取り込みます。  
この取り込み作業を マージ と呼ぶ。

<br>

# チェックアウト

ブランチの内容を作業ディレクトリに反映させることが チェックアウト 。

図書館から本を借りることを、英語で check out と言います。  
リポジトリ（フォルダ）からファイルを借りて、手元に置いてるイメージ。

<img src="images/2_2.png" width="50%" alt="" title="">

<br>


# ブランチを作る

Forkの上部にあるBranchをクリックすると、ダイアログが表示されます。

今回は試しに Branch name 欄に、 「自分の名前/practice」 を入力してください。  
Checkout after createにチェックを入れて、Create and Checkoutボタンをクリックしてください。

<img src="images/2_3.png" width="90%" alt="" title="">

<br>

mainの隣に、自分の作ったブランチが表示されていれば成功  

<img src="images/2_4.png" width="50%" alt="" title="">

<br>

# ファイルを作成する
作業ディレクトリを開いてください。

新しいテキストファイルを作成し、ファイル名を自分の名前にしてください。

<img src="images/2_5.png" width="50%" alt="" title="">

<br>

# ブランチにコミット
ファイルが作成できたら、コミット。  
作成したブランチ(自分の名前/practice)にだけコミットが追加され、mainブランチには追加されていないことがわかります。

<img src="images/2_6.png" width="50%" alt="" title="">

<br>

ここで、もしmainブランチにコミットが追加されている場合は、practiceブランチのチェックアウトができていませんので、チェックアウトしてください。

<br>

# ブランチをPush

画面上部の Push ボタンをクリックすると、ダイアログが出てきます。  
そのまま Push ボタンをクリックすると、プッシュが開始されます。

<img src="images/2_7.png" width="90%" alt="" title="">

<br>

以下のように、GitHubのアイコンがpracticeブランチに付いたら、Push成功

<img src="images/2_8.png" width="50%" alt="" title="">

<br>

# フェッチ
リモートリポジトリにあるブランチを、PCのローカルリポジトリにコピーすることを フェッチ と呼びます。  
fetch は、遠くにある物を取りに行って持って帰るという意味の英単語です。

<img src="images/2_9.png" width="50%" alt="" title="">

<br>

画面上部の Fetch ボタンをクリックすると、ダイアログが表示されます。    
Fetch all remotes にチェックを入れた状態で、 Fetch ボタンをクリックすると、フェッチが始まります。

<img src="images/2_10.png" width="90%" alt="" title="">

<br>

以下のように、他のメンバーのpracticeブランチが表示されれば成功

<img src="images/2_11.png" width="50%" alt="" title="">

<br>

# 他のメンバーのブランチをチェックアウトする
他のメンバーのブランチを右クリック > ブランチ名 > Checkout をクリックします。

<img src="images/2_12.png" width="90%" alt="" title="">

<br>

ダイアログが表示されるので、そのまま Track をクリックします。

<img src="images/2_13.png" width="70%" alt="" title="">

<br>

他のメンバーのブランチに✓がつけば成功です。

<img src="images/2_14.png" width="50%" alt="" title="">

<br>

作業ディレクトリを開くと、他のメンバーのコミットした内容が復元されます。

<img src="images/2_15.png" width="50%" alt="" title="">

<br>

# マージ
mainブランチをチェックアウトしてください。

（ここからは1人ずつ作業）  
1人目は、自分の名前/practiceブランチを右クリックして Merge into ‘main’ をクリックしてください。

<img src="images/2_16.png" width="90%" alt="" title="">

<br>

Merge Option を No Fast-Forward に変更。  
（以後の説明をわかりやすくするため。）

Merge ボタンをクリック。

<img src="images/2_17.png" width="70%" alt="" title="">

<br>

自分の名前/practiceブランチがmainに合流したら成功。  
この作業をマージと呼びます。

<img src="images/2_18.png" width="50%" alt="" title="">

<br>

マージできたら、mainブランチをプッシュしてください。

他のメンバーは、フェッチをして、最新のmainブランチを取得してください。

<img src="images/2_19.png" width="50%" alt="" title="">

<br>



origin/main となっている箇所をダブルクリックすると、以下のようなダイアログが表示されます。

<img src="images/2_20.png" width="90%" alt="" title="">

<br>

そのまま Checkout and Fast-Forward ボタンをクリック。

すると、main ブランチが一番上に移動します。

<img src="images/2_21.png" width="50%" alt="" title="">

<br>

ここで、2人目の出番です。

自分の名前/practiceブランチをmainブランチにマージして、プッシュしてください。  
プッシュが終わったら、他のメンバーはフェッチをして、mainブランチを更新します。

この作業をメンバー全員分実施します。  
最終的には以下のように、すべてのブランチがmainに合流します。

<img src="images/2_22.png" width="50%" alt="" title="">

<br>

作業ディレクトリを見ると、すべてのメンバーのファイルが表示されます

<img src="images/2_23.png" width="50%" alt="" title="">

<br>

このように、マージ機能によって、複数のメンバーの編集履歴を統合でき、共同開発が可能になります。

<br>

# 競合について
もし、2人が同じファイルを編集してコミットしたらどうなるでしょうか？

競合という現象が発生します。

競合を解決するためには、2つのブランチを見比べて、つじつまを合わせるための新しいコミットを追加する作業が必要になります。  
非常に手間のかかる作業なので、競合はなるべく避けるべきです。  
そのためにも、同じファイルを編集しないようにする工夫が必要なります。

以下は、競合を避けるための工夫です。

## フォルダー構造を明確にする
フォルダー構造を明確にし、誰がどのフォルダーを触るのか、担当を決める。  

## 自分の担当外のファイルを編集する場合は声をかける
自分の担当外のファイルを編集したい場合は声をかけることで、競合を避けましょう。

声をかけるとは、Slack等で連絡してもいいですし、PullRequestというGitHubの機能を利用する場合もあります。

## こまめにフェッチする
mainブランチはメンバー全員が自分の作業を日々反映させるため、非常に速いスピードで変化します。

その変化に追いつくため、こまめなフェッチが大事です。


## ブランチをこまかく作って、こまめにマージする
mainブランチから分岐してから、長い時間が経つと、競合が発生しやすくなります。

1つのブランチでたくさんの作業をせずに、細かい単位でブランチを作り、こまめにマージすると、競合を防ぐことができます。


















































