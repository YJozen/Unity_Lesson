<!DOCTYPE html>
<!-- saved from url=(0086)https://tempura-kingdom.jp/unisharp/#LINQusersSelectuser_gt_userIdWhereid_gt_id_1First -->
<html lang="ja"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta property="og:type" content="blog"><meta property="og:title" content="UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国"><meta property="og:url" content="https://tempura-kingdom.jp/unisharp/"><meta property="og:description" content="はじめに ゲームって、パフォーマンスを要求されたり膨大なロジックだったりで、コードが煩雑になりがちです。 そこを、C#機"><meta property="og:image" content="https://tempura-kingdom.jp/wp-content/uploads/thumbnail_unisharp_0705.jpg"><meta property="og:site_name" content="てんぷら王国"><meta property="fb:admins" content=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@okamura0510"><meta name="description" itemprop="description" content="はじめに ゲームって、パフォーマンスを要求されたり膨大なロジックだったりで、コードが煩雑になりがちです。 そこを、C#機"><link rel="canonical" href="https://tempura-kingdom.jp/unisharp/"><link media="all" href="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/autoptimize_704551e3d0d82c67eba5a15722df9d35.css" rel="stylesheet"><title>UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国</title><meta name="robots" content="max-image-preview:large"><link rel="dns-prefetch" href="https://ajax.googleapis.com/"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com/"><link rel="alternate" type="application/rss+xml" title="てんぷら王国 » フィード" href="https://tempura-kingdom.jp/feed/"><link rel="alternate" type="application/rss+xml" title="てんぷら王国 » コメントフィード" href="https://tempura-kingdom.jp/comments/feed/"><link rel="alternate" type="application/rss+xml" title="てんぷら王国 » UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】 のコメントのフィード" href="https://tempura-kingdom.jp/unisharp/feed/"> <script type="text/javascript" async="" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/analytics.js"></script><script type="text/javascript" async="" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/js"></script><script src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/f.txt"></script><script type="text/javascript">window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/tempura-kingdom.jp\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.5.5"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83d\udc26\u200d\u2b1b","\ud83d\udc26\u200b\u2b1b")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);</script> <link rel="stylesheet" id="swiper-style-css" href="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/swiper.min.css" type="text/css" media="all"><link rel="https://api.w.org/" href="https://tempura-kingdom.jp/wp-json/"><link rel="alternate" type="application/json" href="https://tempura-kingdom.jp/wp-json/wp/v2/posts/6690"><link rel="shortlink" href="https://tempura-kingdom.jp/?p=6690"><link rel="alternate" type="application/json+oembed" href="https://tempura-kingdom.jp/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F"><link rel="alternate" type="text/xml+oembed" href="https://tempura-kingdom.jp/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F&amp;format=xml"><link rel="icon" href="https://tempura-kingdom.jp/wp-content/uploads/cropped-icon_0712-32x32.png" sizes="32x32"><link rel="icon" href="https://tempura-kingdom.jp/wp-content/uploads/cropped-icon_0712-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="https://tempura-kingdom.jp/wp-content/uploads/cropped-icon_0712-180x180.png"><meta name="msapplication-TileImage" content="https://tempura-kingdom.jp/wp-content/uploads/cropped-icon_0712-270x270.png">  <script async="" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/js(1)"></script> <script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76317473-5');</script>  <script data-ad-client="ca-pub-2845065930746727" async="" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/f(1).txt" data-checked-head="true"></script> <meta http-equiv="origin-trial" content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="><meta http-equiv="origin-trial" content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="><meta http-equiv="origin-trial" content="A9uiHDzQFAhqALUhTgTYJcz9XrGH2y0/9AORwCSapUO/f7Uh7ysIzyszNkuWDLqNYg8446Uj48XIstBW1qv/wAQAAACNeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3Mjc4MjcxOTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A9R+gkZL3TWq+Z7RJ2L0c7ZN7FZD5z4mHmVvjrPitg/EMz9P3j5d3W7Vw5ZR9jtJGmWKltM4BO3smNzpCgwYuwwAAACTeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3Mjc4MjcxOTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><script src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/clipboard.min.js"></script></head><body class="post-template post-template-onecolumn-960 post-template-onecolumn-960-php single single-post postid-6690 single-format-standard" id="nofont-style"><div id="wrapper"><div id="scroll-content" class="animate-off"><div class="cps-info-bar animate-off"> <a href="https://zenn.dev/okamura0510/books/othello-programming"><span>【エビでもわかる】オセロプログラミング 〜オセロを作りながらゲームのプログラムを学ぼう〜</span></a></div><div id="main-image" class="main-image animate-off"> <a href="https://tempura-kingdom.jp/"><img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/header_pc_0716.png"></a><div class="top-image-meta"></div></div><div id="nav-container" class="header-style9-animate animate-off"><div class="header-style6-box"><div id="drawernav5" class="ef"><nav class="fixed-content"><ul class="menu-box"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-2892"><a href="https://tempura-kingdom.jp/">ホーム</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-6713"><a href="https://tempura-kingdom.jp/tag/pickup/">おすすめ記事</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-6714"><a href="https://tempura-kingdom.jp/tag/content/">作ったもの</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8494"><a href="https://tempura-kingdom.jp/profile/">プロフィール</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8493"><a href="https://tempura-kingdom.jp/contact/">お問い合わせ</a></li></ul></nav></div></div></div><div class="clearfix"></div><div class="pickup-contents-box animate-off"><ul class="pickup-contents" style="margin-top:-15px;margin-bottom:0px"><li style="margin-top:0px"><img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/pickup_label_0705.png"></li><li></li><li></li><li></li></ul><div style="background-color:#19c1c6; padding-bottom:10px"><ul class="pickup-contents"><li> <a href="https://tempura-kingdom.jp/dotween/" target=""><div class="pickup-image"> <img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_dotween_0705.jpg" alt="" width="269" height="151"></div><div style="text-align:center; margin-top:5px; font-size:110%">【Unity】DOTweenの使い方<br>特徴・コード・実装例</div> </a></li><li> <a href="https://tempura-kingdom.jp/unity_learn/" target=""><div class="pickup-image"> <img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_unity_learn_3.png" alt="" width="269" height="151"></div><div style="text-align:center; margin-top:5px; font-size:110%">【初心者向け】<br>Unityで「よく使う関数」や「よく使うコード」</div> </a></li><li> <a href="https://tempura-kingdom.jp/component/" target=""><div class="pickup-image"> <img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_component_0705.jpg" alt="" width="269" height="151"></div><div style="text-align:center; margin-top:5px; font-size:110%">Unityの設計思想<br>コンポーネント指向とは？</div> </a></li><li> <a href="https://tempura-kingdom.jp/godtouch/" target=""><div class="pickup-image"> <img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_godtouch_0705.jpg" alt="" width="269" height="151"></div><div style="text-align:center; margin-top:5px; font-size:110%">【Unityアセット】GodTouch<br>エディタ上でタッチを確認する</div> </a></li></ul></div></div><div id="contents"><main id="onecolumn960" class="main-contents article_style1 animate-off" itemprop="mainContentOfPage"><section class="cps-post-box hentry"><article class="cps-post"><header class="cps-post-header"> <span class="cps-post-cat category-unity" itemprop="keywords"><a href="https://tempura-kingdom.jp/category/unity/" style="background-color:!important;">Unity</a></span><h1 class="cps-post-title entry-title" itemprop="headline">UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】</h1><div class="cps-post-meta vcard"> <span class="writer fn" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">tempura</span></span> <span class="cps-post-date-box"> <span class="cps-post-date"><i class="jic jin-ifont-watch" aria-hidden="true"></i>&nbsp;<time class="entry-date date published updated" datetime="2020-07-23T00:00:57+00:00">2020年7月23日</time></span> </span></div></header><div class="share-top sns-design-type01"><div class="sns-top"><ol><li class="twitter"><a href="https://twitter.com/share?url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F&amp;text=Unity%E3%81%A8C%23%E3%81%A7%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86%E3%80%90C%231.0%E3%80%9CC%238.0%E3%80%91%20-%20%E3%81%A6%E3%82%93%E3%81%B7%E3%82%89%E7%8E%8B%E5%9B%BD&amp;via=okamura0510&amp;related=okamura0510"><i class="jic jin-ifont-twitter"></i></a></li><li class="facebook"> <a href="https://www.facebook.com/sharer.php?src=bm&amp;u=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F&amp;t=Unity%E3%81%A8C%23%E3%81%A7%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86%E3%80%90C%231.0%E3%80%9CC%238.0%E3%80%91%20-%20%E3%81%A6%E3%82%93%E3%81%B7%E3%82%89%E7%8E%8B%E5%9B%BD" onclick="javascript:window.open(this.href, &#39;&#39;, &#39;menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600&#39;);return false;"><i class="jic jin-ifont-facebook-t" aria-hidden="true"></i></a></li><li class="hatebu"> <a href="https://b.hatena.ne.jp/add?mode=confirm&amp;url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F" onclick="javascript:window.open(this.href, &#39;&#39;, &#39;menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=510&#39;);return false;"><i class="font-hatena"></i></a></li><li class="pocket"> <a href="https://getpocket.com/edit?url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F&amp;title=Unity%E3%81%A8C%23%E3%81%A7%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86%E3%80%90C%231.0%E3%80%9CC%238.0%E3%80%91%20-%20%E3%81%A6%E3%82%93%E3%81%B7%E3%82%89%E7%8E%8B%E5%9B%BD"><i class="jic jin-ifont-pocket" aria-hidden="true"></i></a></li><li class="line"> <a href="https://line.me/R/msg/text/?https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F"><i class="jic jin-ifont-line" aria-hidden="true"></i></a></li></ol></div></div><div class="clearfix"></div><div class="cps-post-main-box"><div class="cps-post-main    h2-style01 h3-style01 h4-style01 entry-content  " itemprop="articleBody"><div class="clearfix"></div><div id="toc_container" class="no_bullets"><p class="toc_title">目次 <span class="toc_toggle"><span class="toc_brackets">[</span><a href="https://tempura-kingdom.jp/unisharp/#">非表示</a><span class="toc_brackets">]</span></span></p><ul class="toc_list"><li><a href="https://tempura-kingdom.jp/unisharp/#i">はじめに</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#i-2">コメント：//, /**/, ///</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#const_readonly">定数：const, readonly</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#22_2">多次元配列：[2,2], [2][]</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#for_foreach_while">ループ処理：for, foreach, while</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#var">型推論：var</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#dynamic">動的型：dynamic</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#nullNullableint">null許容値型(Nullable型)：int?</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#C80nullstring_a_quotquot_string_a_null">【C#8.0】null許容参照型：string a = "", string? a = null</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#object_defaultobject">キーワードを変数名に使う：@object = default(object)</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#Methodint_a_0_int_b_0">デフォルト引数：Method(int a = 0, int b = 0)</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#Methodb_1">名前付き引数：Method(b: 1);</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#Methodref_int_a_Methodout_int_b_Methodin_int_c">参照渡し：Method(ref int a), Method(out int b), Method(in int c)</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#int_a_int_b_Method">タプル：(int a, int b) Method</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#Methodthis_Transform_t_int_a">拡張メソッド：Method(this Transform t, int a)</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#delegate_void_Method_Action_Funcltboolgt">デリゲートとラムダ式：delegate void Method, Action, Func&lt;bool&gt;</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#void_Start_void_execute">ローカル関数：void Start(){ void execute(){} }</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#LINQusersSelectuser_gt_userIdWhereid_gt_id_1First">LINQ：users.Select(user =&gt; user.Id).Where(id =&gt; id == 1).First()</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#using_namespace_class_Property_Method">クラスのカタチ：using, namespace, class, Property, Method</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#staticstatic_class">staticクラス：static class</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#partialpartial_class">partialクラス：partial class</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#ltTgt_where_T_class">ジェネリック：&lt;T&gt; where T : class</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#Listltintgt_Dictionaryltint_stringgt">コレクション：List&lt;int&gt;, Dictionary&lt;int, string&gt;</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#nameofstring_a_nameofa">nameof演算子：string a = nameof(a)</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#nullab">null条件演算子：a?.b</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#C80nulla_b">【C#8.0】null合体代入演算子：a ??= b</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#_stringFormat__StringBuilder">文字列整形：@, string.Format, $, $@, StringBuilder</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#SerializeField">属性：[SerializeField]</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#MethodCallerMemberName_string_a_quotquot">呼び出し元情報：Method([CallerMemberName] string a = "")</a></li><li><a href="https://tempura-kingdom.jp/unisharp/#define_if_region_pragma">プリプロセス：#define, #if, #region, #pragma</a></li></ul></div><h2><span id="i">はじめに</span></h2><p>ゲームって、パフォーマンスを要求されたり膨大なロジックだったりで、コードが煩雑になりがちです。<br> そこを、<span style="background-color:#e0ffff;padding:1px">C#機能を上手く使ってコードを読みやすくしよう</span>、というのがこの記事の主旨です。<br> 自分の専門分野であるUnityとC#で、読みやすいコードを作るノウハウをまとめました。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">読みやすいコードってなんだ？</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">他の人が見た時に理解しやすいコードだよ<br>読みやすいコードを書けば、みんなに喜ばれるよ</div></div></div></div><div class="concept-box1" style="margin-top:55px !important"><ul><li>Unity2018・C#7.3想定で書かれてます(C#8はまだ使えないので予想で書いてます)</li><li>パフォーマンスについては触れません(改善手法については<a href="https://tempura-kingdom.jp/memory/">こちら</a>)</li><li>C#をより詳しく知りたい方は <a href="https://ufcpp.net/study/csharp/" rel="noopener noreferrer" target="_blank">C# によるプログラミング入門</a> が超オススメです☆</li></ul></div> <a href="https://tempura-kingdom.jp/readable_code/" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/noimage_0709.jpg" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">【2万行のコードに絶望した僕が考える】ゲーム開発でコードを読みやすくする方法10選</span><span class="blog-card-excerpt">自分は、ゲーム開発においてコードを読みやすくするのはとても重要だと考えています。  読みにくいと修正が大変→ ゲームのロジッ...</span></div></div></a><h2><span id="i-2">コメント：//, /**/, ///</span></h2><p>3通りの書き方があります。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 1行コメント</span>

<span class="token comment">/*
 複数行コメント
*/</span>

<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// ドキュメンテーションコメント</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">// コメントはコードを理解するのに役立つものなら何でもいいから書こう</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// すぐに移行するとテンポが悪いのでディレイを入れる</span>
<span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation">(</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">/**/ は長いコードをコメントアウトしたり、/*TEST*/ → /*TEST/ のようなテストコード切り替えに便利</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">/*
 ...
 1000行くらいある長いコード
 ...
*/</span>

<span class="token class-name"><span class="token keyword">var</span></span> power <span class="token operator">=</span> <span class="token comment">/*TEST*/</span><span class="token number">100</span><span class="token comment">/*/1/**/</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> power <span class="token operator">=</span> <span class="token comment">/*TEST/100/*/</span><span class="token number">1</span><span class="token comment">/**/</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">/// はVisualStudioでカーソルを当てた時に情報が表示されて便利</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// 世界創造</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token comment">/// &lt;param name="id"&gt;ID&lt;/param&gt;</span>
<span class="token comment">/// &lt;returns&gt;世界&lt;/returns&gt;</span>
<span class="token return-type class-name">World</span> <span class="token function">CreateWorld</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">World</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>自分は全てのコメントを <code>//</code> で統一して、短く簡潔に書いて、コード全体を通した見やすさを重視してます。<br> <code>///</code> は、いかんせん簡単な説明でも3行必要だったり、1行で書くにしても</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">/// &lt;summary&gt;最強の世界&lt;/summary&gt;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">StrongWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// 最強の世界</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">StrongWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>と、<code>//</code> の方が見やすかったりで、最近は使用頻度低めです。<br> 外部公開するライブラリとかでは、ちゃんと <code>///</code> を書いた方が親切かと思います。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">気付いたらファイルの半分がコメントだったことがあるよ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">丁寧すぎるのも考えものだな</div></div></div></div><h2><span id="const_readonly">定数：const, readonly</span></h2><p><code>const</code>と<code>readonly</code>があります。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// const：コンパイル時定数</span>
<span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span>       ConstId  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//const Vector3 ConstPos = Vector3.one; // newするものに使えない</span>

<span class="token comment">// readonly：読み取り専用変数(staticにすれば実行時定数として扱える)</span>
<span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span>     ReadonlyId   <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">Vector3</span> ReadonlyPos  <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">;</span> <span class="token comment">// newするものにも使える</span>
<span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">string</span></span>         ReadonlyName <span class="token operator">=</span> <span class="token string">"sun"</span><span class="token punctuation">;</span>       <span class="token comment">// staticじゃなくても使える</span>

<span class="token keyword">public</span> <span class="token function">Elder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// readonlyならコンストラクタで書き換え可能</span>
    ReadonlyName <span class="token operator">=</span> <span class="token string">"moon"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Explode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// constならローカル変数にも使える</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">float</span></span> pi <span class="token operator">=</span> Mathf<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">定数は、定数ファイルにまとめておけば後から値を編集しやすい(あの定数どこにあったっけ？がなくなる)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AppConst</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span>         Version      <span class="token operator">=</span> <span class="token string">"3.2.1"</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsAndroid    <span class="token operator">=</span> Application<span class="token punctuation">.</span>platform <span class="token operator">==</span> RuntimePlatform<span class="token punctuation">.</span>Android<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsIOS        <span class="token operator">=</span> Application<span class="token punctuation">.</span>platform <span class="token operator">==</span> RuntimePlatform<span class="token punctuation">.</span>IPhonePlayer<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span>  ScreenWidth  <span class="token operator">=</span> Screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span>  ScreenHeight <span class="token operator">=</span> Screen<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span>            CanvasWidth  <span class="token operator">=</span> <span class="token number">1080</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span>            CanvasHeight <span class="token operator">=</span> <span class="token number">1920</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span>         PrefabPath   <span class="token operator">=</span> <span class="token string">"Prefabs/{0}"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>自分は<code>const</code>を使えるものは<code>const</code>にし、それ以外は<code>readonly</code>にしています。<br> <code>const</code>は出来れば<code>public</code>にしない方がいいのですが(<a href="https://ufcpp.net/study/csharp/sp_const.html#versioning" rel="noopener noreferrer" target="_blank">const のバージョニング問題</a>)、Unityで使う分には特に問題になったことがないので、気にせず<code>public const</code>にしてます。実行速度も速くなりますし。<br> ライブラリとか作る時は、<code>const</code>よりも<code>readonly</code>にしておいた方が無難だと思います。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">昔は<code>readonly</code>だけ使ってたんだけど、友達の助言で<code>const</code>使ってみたらめちゃくちゃ便利で感謝してるよ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">持つべきものは友か</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/GameData/GameConst.cs" rel="noopener noreferrer" target="_blank">【Squares】GameConst.cs</a></p></div><h2><span id="22_2">多次元配列：[2,2], [2][]</span></h2><p><code>[,](四角い配列)</code>は全ての列数が一緒で、<code>[][](配列の配列)</code>は逆に列数を変えられます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 四角い配列</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> cells <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// これが</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> cells <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment">// こうなって</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> cells <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>               <span class="token comment">// こう書ける(好きな書き方で)</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> cells <span class="token operator">=</span> 
<span class="token punctuation">{</span> 
    <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 配列の配列</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> jags <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// これが</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> jags <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>          <span class="token comment">// こうなって</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> jags <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>                      <span class="token comment">// こう書ける(好きな書き方で)</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> jags <span class="token operator">=</span>
<span class="token punctuation">{</span>
    <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token comment">// 列数を変えられる</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> cells <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> cells<span class="token punctuation">.</span><span class="token function">GetLength</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> cells<span class="token punctuation">.</span><span class="token function">GetLength</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            cells<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token class-name"><span class="token keyword">var</span></span> jags <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> jags<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> jags<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>Length<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            jags<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">y</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>基本、四角い配列にした方がパフォーマンスがいいのでそっち使った方がいいです。<br> それに、四角い配列の方が構造がシンプルで、コードを追いやすいです(シンプルな見た目は人を幸せにします)。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">列数を変えるって意外と使われそうだが？<br>アイテムの数がそれぞれ違うとか</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">そういう場合はクラスにして1次元配列にした方がいいよ<br>多次元は難しいから、なるべく分かりやすくしよう</div></div></div></div><h2><span id="for_foreach_while">ループ処理：for, foreach, while</span></h2><p>よく使うループ処理はこの3つ。</p><p class="prism-title">for：インデックスが必要な時</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> members<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    members<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Member</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">foreach：要素を列挙したい時</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> member <span class="token keyword">in</span> members<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>member<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">while：条件を満たす間処理し続けたい時</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> sr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span><span class="token string">"story.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> line <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> sr<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>自分は、基本<code>foreach</code>、インデックスが必要なら<code>for</code>、<code>while</code>は出来るだけ使わない、という方針です。<br> <code>for</code>と<code>foreach</code>はどっち使っても大丈夫ですが、記述がスッキリするので<code>foreach</code>を優先してます(見た目重視)。<br> <code>while</code>は無限ループが怖いのでなるべく使わないようにしてます。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content"> パフォーマンスは<code>for</code>の方がいい時があるから、大量ループ処理では<code>for</code>を使った方がいいよ(モーション負荷やばかったなぁ…)</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">なるほど、そこらへんは使い分けだな</div></div></div></div><h2><span id="var">型推論：var</span></h2><p><code>var</code>で変数宣言すれば、右辺から型を推論してくれます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが         </span>
<span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> squareNames       <span class="token operator">=</span> squares<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">VanishingAnimation</span> vanishingAnimation <span class="token operator">=</span> square<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>VanishingAnimation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Transform</span> transform                   <span class="token operator">=</span> square<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> connectingId                      <span class="token operator">=</span> square<span class="token punctuation">.</span>ConnectingId<span class="token punctuation">;</span>

<span class="token comment">// こう書ける</span>
<span class="token class-name"><span class="token keyword">var</span></span> squareNames        <span class="token operator">=</span> squares<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> vanishingAnimation <span class="token operator">=</span> square<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>VanishingAnimation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> transform          <span class="token operator">=</span> square<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> connectingId       <span class="token operator">=</span> square<span class="token punctuation">.</span>ConnectingId<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">varを使う上で注意するとしたら、こんな場面</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// オブジェクトをnull初期化したい</span>
<span class="token class-name">Square</span> fallingSquare <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token comment">// これは</span>
<span class="token class-name"><span class="token keyword">var</span></span> fallingSquare    <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token type-expression class-name">Square</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// こう書けるけどなんか無理やり感(他の変数と揃えるため使ってるけど・・・)</span>

<span class="token comment">// 右辺とは違う型で受け取りたい(これはvarでは無理)</span>
<span class="token class-name"><span class="token keyword">var</span></span> transform       <span class="token operator">=</span> image<span class="token punctuation">.</span>rectTransform<span class="token punctuation">;</span> <span class="token comment">// Transformで受け取りたい(RectTransformになってしまう)</span>
<span class="token class-name">Transform</span> transform <span class="token operator">=</span> image<span class="token punctuation">.</span>rectTransform<span class="token punctuation">;</span> <span class="token comment">// こういう場合はちゃんと型を明示する</span>

<span class="token comment">// こんな泥臭いコード(変数が多い上に独自クラスも相まってカオス。。)</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">InitBone</span><span class="token punctuation">(</span><span class="token class-name">Bone</span> bone<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> cell         <span class="token operator">=</span> bone<span class="token punctuation">.</span>SpriteStudioCell<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> d2d          <span class="token operator">=</span> bone<span class="token punctuation">.</span>D2dDestructible<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> avatarBaseX  <span class="token operator">=</span> cell<span class="token punctuation">.</span>Rectangle<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> avatarBaseY  <span class="token operator">=</span> avatarHeight <span class="token operator">-</span> cell<span class="token punctuation">.</span>Rectangle<span class="token punctuation">.</span>y <span class="token operator">-</span> cell<span class="token punctuation">.</span>Rectangle<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> alphas       <span class="token operator">=</span> d2d<span class="token punctuation">.</span>AlphaData<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> alphaWidth   <span class="token operator">=</span> d2d<span class="token punctuation">.</span>AlphaWidth<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> alphaHeight  <span class="token operator">=</span> d2d<span class="token punctuation">.</span>AlphaHeight<span class="token punctuation">;</span>
    <span class="token comment">// この後もいろいろ続く...</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>自分は使えるとこ全部<code>var</code>にしてます。コードが見渡しやすくなるメリットはデカイです。<br> それに<code>var</code>を使うと、自然と変数名に気を遣うようになるのでオススメです(変数名超大事！)。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">ちゃんと型を書いた方が分かりやすくないか？</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">自分も長年そう思ってたよ。でもコードって、全体の流れで読むから変数名から大体分かっちゃうんだよ。</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">人間の学習能力ってすごいな</div></div></div></div><div class="concept-box5"><p> 変数名を作る時は <a href="https://codic.jp/" rel="noopener noreferrer" target="_blank">codic</a> がオススメです☆</p></div><h2><span id="dynamic">動的型：dynamic</span></h2><p><code>dynamic</code>で変数宣言すれば、動的な型を定義出来ます(コンパイル時に動的コードが生成される)。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token class-name"><span class="token keyword">var</span></span>     v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">object</span></span>  o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">dynamic</span></span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// dynamicなら定義されてないメンバでもコンパイルエラーにならない(実行時に調べられる)</span>
<span class="token class-name"><span class="token keyword">int</span></span> userId <span class="token operator">=</span> v<span class="token punctuation">.</span>UserId<span class="token punctuation">;</span> <span class="token comment">// ×</span>
<span class="token class-name"><span class="token keyword">int</span></span> userId <span class="token operator">=</span> o<span class="token punctuation">.</span>UserId<span class="token punctuation">;</span> <span class="token comment">// ×</span>
<span class="token class-name"><span class="token keyword">int</span></span> userId <span class="token operator">=</span> d<span class="token punctuation">.</span>UserId<span class="token punctuation">;</span> <span class="token comment">// ○</span>

v<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ×</span>
o<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ×</span>
d<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ○</span>

<span class="token comment">// 共通レスポンス(今後メンバを追加していきたい)</span>
<span class="token keyword">class</span> <span class="token class-name">ResponseHeader</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>いろんなC#機能を使ってきたけど、いまだに<code>dynamic</code>は使い所が難しい(というか使えてない)。<br> <code>Json</code>や<code>MVVM</code>で試したことがあるけど、最終的には使わずじまいでした(パフォーマンス優先)。<br> 基本、静的な型にしてエラーを検知した方が安全なので、これだ！っていう時の切り札に。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">ダイナミックって俺みたいだな<br><code>［意味］動的なさま。力強く生き生きと躍動するさま。「ダイナミックな演技」</code></div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">ああ、なぜか<code>dynamic</code>に惹かれた理由が分かった気がするよ…</div></div></div></div><div class="concept-box5"><p> コンパイル結果(IL)を見るなら <a href="https://sharplab.io/" rel="noopener noreferrer" target="_blank">SharpLab</a> がオススメです☆<br> <a href="https://ufcpp.net/study/csharp/sp4_dynamic.html#what" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】dynamic で何ができるか</a></p></div><h2><span id="nullNullableint">null許容値型(Nullable型)：int?</span></h2><p>値型に<code>null</code>を追加出来ます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// intにnullを追加</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> id <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">// Valueで値を取得(もしくはキャスト)。ただし id = null の場合は例外が発生。</span>
<span class="token class-name"><span class="token keyword">int</span></span> <span class="token keyword">value</span> <span class="token operator">=</span> id<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>id<span class="token punctuation">;</span>

<span class="token comment">// なのでHasValueで判定する(値がある場合は不要だけど、判定しといた方が無難)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span>HasValue<span class="token punctuation">)</span> <span class="token keyword">value</span> <span class="token operator">=</span> id<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>

<span class="token comment">// もしくはGetValueOrDefaultなら規定値を返してくれる(どっちの0か区別がつかないけど・・・)</span>
<span class="token keyword">value</span> <span class="token operator">=</span> id<span class="token punctuation">.</span><span class="token function">GetValueOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 一応そのまま判定も出来るけど、複雑なのでちゃんとValueを取得した方がいいと思う</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span>  c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> d <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// false</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">==</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// false</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>b <span class="token operator">==</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// true</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">==</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// true   ← ！？</span>
            
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">&lt;=</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// false</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">&lt;=</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// false</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>b <span class="token operator">&lt;=</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// true</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">&lt;=</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// false  ← ！？</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">null条件演算子で値型の値を取得するのに便利</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> squareY <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">GetSquare</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>Y<span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>squareY<span class="token punctuation">.</span>HasValue<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">int</span></span> y <span class="token operator">=</span> squareY<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>C#8から参照型でも<code>null</code>を許容するか選べるようになり、<code>null</code>をなくしていこう、という流れになりつつあります。<br> その流れには自分も賛成で、あえて値型に<code>null</code>を追加する必要はないかと思いますが、<a href="https://tempura-kingdom.jp/unisharp/#nullab">null条件演算子</a>を使ってく中で自然と使われると思います。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content"><a href="https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%B3%E3%83%88%E3%83%8B%E3%83%BC%E3%83%BB%E3%83%9B%E3%83%BC%E3%82%A2" rel="noopener noreferrer" target="_blank">それは10億ドルにも相当する私の誤りだ</a><br><code>null</code>参照を発明した人も今では後悔してるみたいだよ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">何もないを表すって大…ぬるぽ</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">あ！パワーくん止まった！？</div></div></div></div><div class="concept-box5"><p> <a href="https://www.buildinsider.net/column/iwanaga-nobuyuki/011" rel="noopener noreferrer" target="_blank">nullが生まれた背景と現在のnullの問題点 ― null参照問題（前編）</a><br> <a href="https://www.buildinsider.net/column/iwanaga-nobuyuki/012" rel="noopener noreferrer" target="_blank">C#でのnull参照問題への取り組み ― null参照問題（後編）</a></p></div><h2><span id="C80nullstring_a_quotquot_string_a_null">【C#8.0】null許容参照型：string a = "", string? a = null</span></h2><p>C#8から参照型でも<code>null</code>を許容するか選べる機能が追加されました(オプションで機能をONにする)。</p><p class="prism-title">ザックリしたイメージ(ちゃんとした使い方は参考リンクをご確認ください)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// #nullable でファイルや行単位のnull許容を設定出来る(コンパイラーオプションでプロジェクト全体に設定する方法もある)</span>
<span class="token preprocessor property">#nullable enable               </span><span class="token comment">// 有効</span>
<span class="token comment">//#nullable disable            // 無効</span>
<span class="token comment">//#nullable restore            // プロジェクト設定に戻す</span>
<span class="token comment">//#nullable enable annotations // annotations：null許容機能状態かだけ変える</span>
<span class="token comment">//#nullable enable warnings    // warnings：実際に警告を出す</span>

<span class="token class-name"><span class="token keyword">string</span></span>  name <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// ×：警告が出る(コンパイルエラーになるわけではない)</span>
<span class="token class-name"><span class="token keyword">string</span></span>  name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment">// ○：値を割り当てたのでOK</span>
<span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> name <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// ○：null許容にするには後ろに ? を付ける(null許容値型と同じ)</span>
<span class="token class-name"><span class="token keyword">string</span></span>  name <span class="token operator">=</span> <span class="token keyword">null</span><span class="token operator">!</span><span class="token punctuation">;</span> <span class="token comment">// ○：null免除演算子(後ろに ! )を使って一時的に警告を無視することも出来る</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>正直、ものすごい変更点なので、こればっかりは実際使ってみないと分かりません・・・。<br> なので、ゲームプログラマー視点で思ったことだけ。</p><ol style="margin-bottom: 0em"><li><code>SerializeField</code>や<code>ScriptableObject</code>のような初期値<code>null</code>だけどエディタで値が入る前提のものはどうする？</li><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token preprocessor property">#nullable enable</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span>    message<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token class-name">WorldData<span class="token punctuation">?</span></span> worldData<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token class-name">Transform<span class="token punctuation">?</span></span> ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WorldData</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptableObject</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span>    WorldName<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">MapData<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">?</span></span> Maps<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>Unityだと<code>SerializeField</code>は頻繁に使うので、毎回<code>null</code>許容にする必要があるのと、実際にはエディタで値が入ってから<code>null</code>になることがない「<code>null</code>だけどほぼ<code>null</code>じゃない」的な扱いをどうするか？<br> あと<code>MonoBehaviour</code>だとコンストラクタが使えないので、クラス変数が<code>null</code>許容になりやすい気も。</p><li>メモリ解放のための<code>null</code>初期化</li><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    world <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    map   <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> players<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> players<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> enemies<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> enemies<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>メモリ解放のために、使い終わったら<code>null</code>初期化してることが多いかと思います。<br> 特にゲームだとメモリに相当気を遣うので、メモリ優先だと機能を使いたくないって方針になりそうな気も。<br> 個人的には要所を絞ってメモリ管理すればいいと思ってますが、チーム開発だとルールって大事だからなぁ。</p></ol><p>焦点としては「個人開発」と「チーム開発」で分かれるかもです。<br> 個人開発では、<code>null</code>許容参照型をガンガン使っていこうかと思ってます(試してみたい)。<br> チーム開発では、機能が使えるようになっても当面は様子見になるんじゃないかなぁ。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">他の言語で<code>null</code>非許容を使ったことがあるんだけど、慣れなくて <code>!</code>(警告無視)を使いまくっちゃったよ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">当たり前を変えるって難しいんだな</div></div></div></div><div class="concept-box5"><p> <a href="https://ufcpp.net/study/csharp/resource/nullablereferencetype/" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】null許容参照型</a><br> <a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/nullable-references" rel="noopener noreferrer" target="_blank">【Microsoft Docs】null許容参照型</a></p></div><h2><span id="object_defaultobject">キーワードを変数名に使う：@object = default(object)</span></h2><p>変数名の前に<code>@</code>を付けることで、キーワードも変数名に使えます。</p><p class="prism-title">キーワードそのものを表しそうな変数の場合に有効</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// MVVMのバインドデータを初期化する</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">InitializeDynamicObject</span><span class="token punctuation">(</span><span class="token class-name">M4uBindingObject</span> bo<span class="token punctuation">,</span> <span class="token class-name">M4uBindingMember</span> bm<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> memberNames   <span class="token operator">=</span> bm<span class="token punctuation">.</span>MemberPath<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span><span class="token string character">'.'</span><span class="token punctuation">,</span> <span class="token string character">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string character">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> componentName <span class="token operator">=</span> memberNames<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> transform     <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> @<span class="token keyword">object</span>       <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">object</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// バインドオブジェクトなのでそのまま変数名にobjectを使いたい</span>
<span class="token punctuation">}</span>

<span class="token comment">// G2U4SでC#コードを作る</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token keyword">var</span> @<span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">in</span></span> UsingClasses<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">//Usings += $"{NewLine}using {usingClass};"; // こう書くより</span>
    Usings <span class="token operator">+=</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">NewLine</span><span class="token punctuation">}</span></span><span class="token string">using </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">@<span class="token keyword">class</span></span><span class="token punctuation">}</span></span><span class="token string">;"</span></span><span class="token punctuation">;</span>     <span class="token comment">// こう書いた方が直感的</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>普段はちゃんと意味のある名前を付けた方がいいけど、状況次第では使えるかもです。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content"><a href="https://tempura-kingdom.jp/g2u4s/">G2U4S</a>ではC#コードを作る関係上、どうしてもキーワードと名前がバッディングしてそんな時役立ったんだ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">普段は使えない力を解放したわけか…</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/M4u2/blob/master/Assets/M4u2/Plugins/Binding/M4uBinding.cs#L70" rel="noopener noreferrer" target="_blank">【M4u2】M4uBinding.cs</a></p></div><h2><span id="Methodint_a_0_int_b_0">デフォルト引数：Method(int a = 0, int b = 0)</span></h2><p>メソッド引数にデフォルト値を設定でき、呼び出す時に省略出来ます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> duration<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isRelative <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token comment">//void Move(bool isRelative = false, float duration) { } // これはダメ(後ろの引数のみOK)</span>

<span class="token comment">// こう呼べる</span>
<span class="token function">Move</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// デフォルト値にはconstやdefaultキーワードも使える</span>
<span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">float</span></span> MoveDuration <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> duration <span class="token operator">=</span> MoveDuration<span class="token punctuation">,</span> <span class="token class-name">Vector3</span> pos <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">コード量を減らせる</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token operator">=&gt;</span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> duration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Move</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> duration<span class="token punctuation">,</span> <span class="token class-name">Action</span> onComplete<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// こう書ける</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> duration <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Action</span> onComplete <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p><code>onComplete</code>のようなコールバックは、デフォルト値<code>null</code>にしておくと便利です(大抵必要な時だけ指定するので)。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content"><code>const</code>値をデフォルト値にしてあげると分かりやすくなるよね</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content"><a href="https://tempura-kingdom.jp/unisharp/#const_readonly">定数</a>はこんなところでも活かされるのか(ふむふむ)</div></div></div></div><h2><span id="Methodb_1">名前付き引数：Method(b: 1);</span></h2><p>メソッドを呼び出す時に、デフォルト値が指定されてるものは名前付きで呼べます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> duration <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Vector3</span> position <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isRelative <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// こう呼べる</span>
<span class="token function">Move</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">position</span><span class="token punctuation">:</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 必要なのだけ指定したり</span>
<span class="token function">Move</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">isRelative</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 後ろだけ名前付きにしたり</span>
<span class="token function">Move</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">isRelative</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">duration</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 順番を変えられたり</span>
<span class="token function">Move</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">duration</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// C#7.2からは前だけ名前付きも出来る</span>
<span class="token comment">//Move(position: Vector3.one, 2);    // ただしこれはダメ(名前なしの順番は守らないといけない)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">コードを見やすく出来る</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 位置だけ指定したい・・・(時間はデフォルトでいい)</span>
<span class="token function">Move</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// こう書ける</span>
<span class="token function">Move</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">position</span><span class="token punctuation">:</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// あとこの場合は名前いらないけど</span>
<span class="token class-name"><span class="token keyword">var</span></span> duration <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> position <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one<span class="token punctuation">;</span>
<span class="token function">Move</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> position<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// あえて書いた方が見やすい時もある(特にフラグ)</span>
<span class="token function">Move</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> position<span class="token punctuation">,</span> <span class="token named-parameter punctuation">isRelative</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>名前付き引数は、名前が変わった時に呼び出し元と定義の両方を修正しないといけなくて面倒だったりするけど、エラーが出るからすぐに気づくし、それよりもコードが見やすくなる恩恵はデカイので重宝してます。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">昔は「引数名って変わりやすいじゃん！使うのやめよう」って思ってたけど、実際使ってみたら全然便利だったよ。。</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">使ってみないと分からないものだな</div></div></div></div><h2><span id="Methodref_int_a_Methodout_int_b_Methodin_int_c">参照渡し：Method(ref int a), Method(out int b), Method(in int c)</span></h2><p>メソッド引数は基本値渡しですが、<code>ref</code>、<code>out</code>、<code>in</code>を付けることで参照渡しに出来ます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// ref：メソッド内で値を変えられる(値の初期化が必要)</span>
<span class="token class-name"><span class="token keyword">var</span></span> executedId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">Execute</span><span class="token punctuation">(</span><span class="token keyword">ref</span> executedId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  executedId = 1</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token class-name"><span class="token keyword">int</span></span> executedId<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    executedId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// out：必ずメソッド内で値が変わる(値の初期化は不要。複数の戻り値に便利)</span>
<span class="token class-name"><span class="token keyword">int</span></span> bonus<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> point <span class="token operator">=</span> <span class="token function">CalculatePoint</span><span class="token punctuation">(</span><span class="token keyword">out</span> bonus<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> point <span class="token operator">=</span> <span class="token function">CalculatePoint</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> bonus<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// C#7からはこう書ける</span>
<span class="token comment">//  bonus = 5</span>
<span class="token comment">//  point = 10</span>
     
<span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">CalculatePoint</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">int</span></span> bonus<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    bonus <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>     

<span class="token comment">// in：参照渡しだけど読み取り専用(参照渡しで大きめの値のコピーをなくす)</span>
<span class="token class-name"><span class="token keyword">var</span></span> bigdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Bigdata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">StartEvent</span><span class="token punctuation">(</span>bigdata<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// in は不要</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">StartEvent</span><span class="token punctuation">(</span><span class="token keyword">in</span> <span class="token class-name">Bigdata</span> bigdata<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//bigdata = new Bigdata(); // 変更は出来ない</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">Bigdata</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 巨大な構造体</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">値の初期化、キーワード指定、メソッド内での書き換え、の比較</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">Method</span><span class="token punctuation">(</span><span class="token keyword">ref</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Method</span><span class="token punctuation">(</span><span class="token keyword">out</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Method</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Method</span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token class-name"><span class="token keyword">int</span></span> a<span class="token punctuation">)</span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Method</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">int</span></span> b<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Method</span><span class="token punctuation">(</span><span class="token keyword">in</span> <span class="token class-name"><span class="token keyword">int</span></span> c<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//c = 0;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">ref：変数をメソッド内で変えたい</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// yだけはメソッド内で判定して決めたい</span>
<span class="token class-name"><span class="token keyword">int</span></span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">SearchPosition</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">ref</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  x = 0, y = 1, z = 0</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SearchPosition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token keyword">ref</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> z<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">out：C#6まで→複数の戻り値、C#7以降→TryParse系メソッド(C#7以降の複数の戻り値はタプルの方がスマート)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// C#6までは複数の戻り値はoutで作ってた</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>Square<span class="token punctuation">&gt;</span></span> vanishedSquares<span class="token punctuation">;</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span>    vanishedConnectingCounts<span class="token punctuation">;</span>
<span class="token function">SearchVanishedSquares</span><span class="token punctuation">(</span><span class="token keyword">out</span> vanishedSquares<span class="token punctuation">,</span> <span class="token keyword">out</span> vanishedConnectingCounts<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// C#7以降はこう書けるようになった(1行で書ける)</span>
<span class="token function">SearchVanishedSquares</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> vanishedSquares<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> vanishedConnectingCounts<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ただしC#7以降の複数の戻り値はタプルの方がスマート</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>vanishedSquares<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">SearchVanishedSquares</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// C#7以降でのoutはTryParse系メソッドに便利(直感的なコードになる)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p><code>ref</code>と<code>out</code>はたまに使います。<code>in</code>は下手に使うと火傷しそうなので、いい感じの使い方を模索中。<br> あと<code>ref</code>はC#7から他の場所でもいろいろ使えるようになったようです(参考リンク参照)。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content"><code>refはC#7から他の場所でもいろいろ使えるようになった</code><br>ってなんか適当な説明だな（ピキッ）</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">ごめんごめん。参照渡しってパフォーマンス改善に有効なんだけど、状況によって変わってくるから、ここでは説明を省かせてもらったよ（怖ぇ…）</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/Scene/Game.cs#L182" rel="noopener noreferrer" target="_blank">【Squares】Game.cs</a> / <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/Game/Map.cs#L69" rel="noopener noreferrer" target="_blank">Map.cs</a><br> <a href="https://github.com/okamura0510/M4u2/blob/master/Assets/M4u2/Plugins/Decorator/M4uConvertBool.cs#L59-L60" rel="noopener noreferrer" target="_blank">【M4u2】M4uConvertBool.cs</a><br> <a href="https://ufcpp.net/study/csharp/sp_ref.html?p=2" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】参照渡し</a><br> <a href="https://ufcpp.net/study/csharp/sp_ref.html#in-copy" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】注意: in 引数を使ってもコピーが発生する場合</a><br> <a href="https://tempura-kingdom.jp/unisharp/#int_a_int_b_Method">タプル</a></p></div><h2><span id="int_a_int_b_Method">タプル：(int a, int b) Method</span></h2><p>複数の戻り値に便利な、名前のない型です(C#7から)。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// タプルは普通の型と同じとこに大体書ける(一部制限はある)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// 定数</span>
    <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">)</span> ReadonlyPos <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// フィールド</span>
    <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">)</span> pos<span class="token punctuation">;</span>

    <span class="token comment">// プロパティ</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span></span> Pos <span class="token operator">=&gt;</span> pos<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// 値の書き換え</span>
        pos<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        pos<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        pos   <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pos   <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token named-parameter punctuation">x</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">y</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 名前も付けられる(見やすく出来る)</span>

        <span class="token comment">// 戻り値は変数で受け取ったり</span>
        <span class="token class-name"><span class="token keyword">var</span></span> newPos <span class="token operator">=</span> <span class="token function">Calculate</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> x      <span class="token operator">=</span> newPos<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> y      <span class="token operator">=</span> newPos<span class="token punctuation">.</span>y<span class="token punctuation">;</span>

        <span class="token comment">// ダイレクトにこう書ける</span>
        <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">var</span></span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Calculate</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>     <span class="token operator">=</span> <span class="token function">Calculate</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> _<span class="token punctuation">)</span>     <span class="token operator">=</span> <span class="token function">Calculate</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不要な値は _ で破棄出来る</span>

        <span class="token comment">// 中身の全比較は == や != が便利</span>
        <span class="token class-name"><span class="token keyword">var</span></span> srcPos <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token named-parameter punctuation">x</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">y</span><span class="token punctuation">:</span>       <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> dstPos <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token named-parameter punctuation">x</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">y</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// これが</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>srcPos<span class="token punctuation">.</span>x <span class="token operator">==</span> dstPos<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> srcPos<span class="token punctuation">.</span>y <span class="token operator">==</span> dstPos<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>srcPos<span class="token punctuation">.</span>x <span class="token operator">!=</span> dstPos<span class="token punctuation">.</span>x <span class="token operator">||</span> srcPos<span class="token punctuation">.</span>y <span class="token operator">!=</span> dstPos<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

        <span class="token comment">// こう書ける(暗黙的型変換による比較も可能)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>srcPos <span class="token operator">==</span> dstPos<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// true</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>srcPos <span class="token operator">!=</span> dstPos<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// false</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// メソッド</span>
    <span class="token return-type class-name"><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span></span> <span class="token function">Calculate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">)</span> pos<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> x <span class="token operator">=</span> pos<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> y <span class="token operator">=</span> pos<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">複数の戻り値はoutよりタプルがオススメ</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token function">SearchVanishedSquares</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> vanishedSquares<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> _<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>vanishedSquares<span class="token punctuation">.</span>Count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// こう書ける(戻り値が自然な位置に来る)</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>vanishedSquares<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">SearchVanishedSquares</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>vanishedSquares<span class="token punctuation">.</span>Count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SearchVanishedSquares</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>Square<span class="token punctuation">&gt;</span></span> vanishedSquares<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> vanishedConnectingCounts<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vanishedSquares          <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    vanishedConnectingCounts <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name"><span class="token punctuation">(</span>List<span class="token punctuation">&lt;</span>Square<span class="token punctuation">&gt;</span> vanishedSquares<span class="token punctuation">,</span> List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span> vanishedConnectingCounts<span class="token punctuation">)</span></span> <span class="token function">SearchVanishedSquares</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p><code>タプル</code>は使い始めたばかりで、まだまだ応用が効きそう。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">以前、タプルにするかクラスにするか迷ったことがあるんだけど、今思えば戻り値みたいなすぐに使いたい場合がタプルにはいいんだろうね</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">まぁサンプル見て、長く使うにはなんか分かりづらくなりそうだもんなぁ</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/Scene/Game.cs#L87" rel="noopener noreferrer" target="_blank">【Squares】Game.cs</a> / <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/Game/Map.cs#L86" rel="noopener noreferrer" target="_blank">Map.cs</a><br> <a href="https://ufcpp.net/study/csharp/datatype/tuples/" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】タプル</a></p></div><h2><span id="Methodthis_Transform_t_int_a">拡張メソッド：Method(this Transform t, int a)</span></h2><p>既存の型に後からメソッドを追加出来ます(静的メソッドをインスタンスメソッドのように呼べます)。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 名前空間の指定が必要(内部的には静的メソッドだから)</span>
<span class="token keyword">using</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Extensions</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Unisharp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
    <span class="token punctuation">{</span>
        <span class="token class-name">IPeco</span>   peco<span class="token punctuation">;</span>
        <span class="token class-name">Dir</span>     dir<span class="token punctuation">;</span>
        <span class="token class-name">Vector3</span> pos<span class="token punctuation">;</span>

        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// これが(静的メソッドを)</span>
            UnisharpExtensions<span class="token punctuation">.</span><span class="token function">SetPositionX</span><span class="token punctuation">(</span>transform<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// こう書ける(インスタンスメソッドのように呼べる)</span>
            transform<span class="token punctuation">.</span><span class="token function">SetPositionX</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            peco<span class="token punctuation">.</span><span class="token function">Fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dir<span class="token punctuation">.</span><span class="token function">IsUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pos<span class="token punctuation">.</span><span class="token function">SetX</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPeco</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Dir</span> <span class="token punctuation">{</span> Up<span class="token punctuation">,</span> Right<span class="token punctuation">,</span> Down<span class="token punctuation">,</span> Left <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Extensions</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 拡張メソッドはstaticクラスにしか定義出来ない</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UnisharpExtensions</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// 参照型の拡張メソッド</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetPositionX</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> x<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            t<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// interfaceの拡張メソッド(LINQで使われてる)</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Fly</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IPeco</span> peco<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

        <span class="token comment">// enumの拡張メソッド</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsUp</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Dir</span> dir<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>dir <span class="token operator">==</span> Dir<span class="token punctuation">.</span>Up<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 構造体の拡張メソッド(C#7.2から構造体も参照渡しで作れるようになった)</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetX</span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token keyword">this</span> <span class="token class-name">Vector3</span> v<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">Unityのクラスを拡張するのに便利(特に構造体のプロパティ)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// こうしたいけど構造体のプロパティなので直接書き換えられない</span>
<span class="token comment">//transform.position.x = 1;</span>

<span class="token comment">// 変数で受け取る必要がある(2行必要)</span>
<span class="token class-name"><span class="token keyword">var</span></span> pos <span class="token operator">=</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
transform<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> pos<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// こう書ける(1行で書ける)</span>
transform<span class="token punctuation">.</span><span class="token function">SetPositionX</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// {型名}Etensionsと名付けておくと分かりやすい</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">TransformExtensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetPositionX</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetPositionY</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetPositionZ</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> z<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">DOTweenは拡張メソッドで定義されてて使いやすい</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp">transform<span class="token punctuation">.</span><span class="token function">DOMove</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>one<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetDelay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetEase</span><span class="token punctuation">(</span>Ease<span class="token punctuation">.</span>Linear<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetLoops</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> LoopType<span class="token punctuation">.</span>Yoyo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>拡張メソッドは便利な機能だけど、実態としては<code>public static</code>な静的メソッドなので濫用は控えた方がいいです。<br> 基本はUnityのクラスで頻繁に使用する静的メソッドを拡張メソッド化する、って感じがいいかと思います。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">拡張メソッドを使い始めたばかりの頃は作りまくってたけど、定義がバラバラになって分かりづらくなったよ…</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">力の代償だな</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/App/Extension.cs" rel="noopener noreferrer" target="_blank">【Squares】Extension.cs</a><br> <a href="https://tempura-kingdom.jp/unisharp/#partialpartial_class">partialクラス(Subenum)</a></p></div> <a href="https://tempura-kingdom.jp/dotween/" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_dotween_0705-320x180.jpg" class="blog-card-thumb-image wp-post-image" alt="" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">Unityで超便利なTweenアセット「DOTween」が好き</span><span class="blog-card-excerpt"> ゲーム開発ではいろいろなアニメーションが必要になる。  キャラクターモーション
バトルエフェクト
UIアニメーション...</span></div></div></a><h2><span id="delegate_void_Method_Action_Funcltboolgt">デリゲートとラムダ式：delegate void Method, Action, Func&lt;bool&gt;</span></h2><p>デリゲートはメソッドへの参照を表す型です。ラムダ式を使えばデリゲートが使いやすくなります。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// デリゲート定義</span>
<span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AnimationComplete</span><span class="token punctuation">(</span><span class="token class-name">GameObject</span> go<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// デリゲート変数</span>
<span class="token class-name">AnimationComplete</span> onAnimationComplete<span class="token punctuation">;</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// デリゲート登録</span>
    onAnimationComplete <span class="token operator">=</span> UpdateCharacter<span class="token punctuation">;</span>

    <span class="token comment">// もしくはこんな感じで2つ以上登録したり、削除したりも出来る</span>
    <span class="token comment">//onAnimationComplete += UpdateCharacter;</span>
    <span class="token comment">//onAnimationComplete += UpdateMonster;</span>
    <span class="token comment">//onAnimationComplete -= UpdateCharacter;</span>
    <span class="token comment">//onAnimationComplete -= UpdateMonster;</span>

    <span class="token comment">// アニメーション再生</span>
    <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// デリゲートメソッド(アニメーション完了後にこのメソッドが呼ばれる)</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">UpdateCharacter</span><span class="token punctuation">(</span><span class="token class-name">GameObject</span> go<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"完了しまうま"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// アニメーション完了後にデリゲートを呼ぶ</span>
    onAnimationComplete<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "完了しまうま"</span>
<span class="token punctuation">}</span>

<span class="token comment">//---------------------------------------------------------------</span>
<span class="token comment">// ただし、今ではラムダ式を使う方が一般的(デリゲートをちゃんと定義するのは稀)</span>
<span class="token comment">//---------------------------------------------------------------</span>

<span class="token comment">// Actionを使えばデリゲート定義がなくなる</span>
<span class="token class-name">Action<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> onAnimationComplete<span class="token punctuation">;</span>
<span class="token comment">//Action           onAnimationComplete; // 引数なし</span>
<span class="token comment">//Action&lt;int&gt;      onAnimationComplete; // 引数1個</span>
<span class="token comment">//Action&lt;int, int&gt; onAnimationComplete; // 引数2個</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// あとこう書くより</span>
    onAnimationComplete <span class="token operator">=</span> UpdateCharacter<span class="token punctuation">;</span>
    <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 引数に渡した方がスマート(デリゲート変数がなくなる)</span>
    <span class="token function">PlayAnimation</span><span class="token punctuation">(</span>UpdateCharacter<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// さらにラムダ式を使えばダイレクトにこう書ける(デリゲートメソッドがなくなる)</span>
    <span class="token function">PlayAnimation</span><span class="token punctuation">(</span>go <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"完了しまうま"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2行以上必要な場合は { } で括る</span>
    <span class="token function">PlayAnimation</span><span class="token punctuation">(</span>go <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"完了しまうま"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        go<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token class-name">Action<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> onComplete <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    onComplete<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Funcは戻り値あり(最後の引数が戻り値の型)</span>
<span class="token class-name">Func<span class="token punctuation">&lt;</span>Animation<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span>  isPlayingAnimation<span class="token punctuation">;</span>
<span class="token comment">//Func&lt;bool&gt;           isPlayingAnimation; // 引数なし・戻り値1個</span>
<span class="token comment">//Func&lt;int, bool&gt;      isPlayingAnimation; // 引数1個・戻り値1個</span>
<span class="token comment">//Func&lt;int, int, bool&gt; isPlayingAnimation; // 引数2個・戻り値1個</span>
        
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    isPlayingAnimation <span class="token operator">=</span> animation <span class="token operator">=&gt;</span> animation<span class="token punctuation">.</span>isPlaying<span class="token punctuation">;</span>

    isPlayingAnimation <span class="token operator">=</span> animation <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> animation<span class="token punctuation">.</span>isPlaying<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> nowAnimation <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isPlayingAnimation</span><span class="token punctuation">(</span>nowAnimation<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">Actionはこの形で使うことが多い(コールバックラムダ式)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> nowAnimation <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">PlayAnimation</span><span class="token punctuation">(</span>nowAnimation<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    <span class="token punctuation">{</span>
        <span class="token comment">// アニメーション完了後の処理</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name">IEnumerator</span> <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token class-name">Animation</span> animation<span class="token punctuation">,</span> <span class="token class-name">Action</span> onComplete <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    animation<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WaitWhile</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> animation<span class="token punctuation">.</span>isPlaying<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 地味にFuncが使われてる(Funcはこの使い方)</span>
    onComplete<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">FuncはLINQで使う</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> ids  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> text <span class="token operator">=</span> ids<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>id <span class="token operator">=&gt;</span> id <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>id <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"ID:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">id</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Where(Func&lt;int, bool&gt; predicate)   条件を書く</span>
<span class="token comment">// Select(Func&lt;int, string&gt; selector) 変換結果を書く</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">いまいちラムダ式のメリットが分からないな</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">自分もそうだった。慣れないうちは「〜した時」って場合に、<code>Action</code>を使うといいよ。あとは無理して使わなくても、他の人のコード見てればだんだん分かってくると思う。</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/M4u2/blob/master/Assets/M4u2/Plugins/Binding/IM4uNotifier.cs#L20" rel="noopener noreferrer" target="_blank">【M4u2】IM4uNotifier.cs</a> / <a href="https://github.com/okamura0510/M4u2/blob/master/Assets/M4u2/Plugins/Binding/M4uBindableBase.cs#L28" rel="noopener noreferrer" target="_blank">M4uBindableBase.cs</a><br> <a href="https://github.com/okamura0510/DOTweenFavorite/blob/master/Assets/DOTweenFavorite/Scripts/Demo.cs#L7" rel="noopener noreferrer" target="_blank">【DOTweenFavorite】Demo.cs</a> / <a href="https://github.com/okamura0510/DOTweenFavorite/blob/master/Assets/DOTweenFavorite/Scripts/Dialog.cs#L39" rel="noopener noreferrer" target="_blank">Dialog.cs</a><br> <a href="https://tempura-kingdom.jp/unisharp/#LINQusersSelectuser_gt_userIdWhereid_gt_id_1First">LINQ</a></p></div><h2><span id="void_Start_void_execute">ローカル関数：void Start(){ void execute(){} }</span></h2><p>C#7から関数内で関数を書ける機能が追加されました(今まではラムダ式で同様のことをしてました)。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ローカル関数(書き方は普通のメソッドと一緒)</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"完了しまうま"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ラムダ式(今まではこっちで書いてた)</span>
    <span class="token class-name">Action</span> execute <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"完了しまうま"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ローカル関数とラムダ式の違い</span>

    <span class="token comment">// 定義前に呼び出せる</span>
    <span class="token function">nailpunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">nailpunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token class-name">Action</span> nailpunch <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">nailpunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 再帰呼び出しが簡潔に書ける</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">nailpunch</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> count<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token function">nailpunch</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Action<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> nailpunch <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    nailpunch <span class="token operator">=</span> count <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token function">nailpunch</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// イテレーターを使える</span>
    <span class="token return-type class-name">IEnumerator</span> <span class="token function">nailpunch</span><span class="token punctuation">(</span><span class="token class-name">Animation</span> animation<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WaitWhile</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> animation<span class="token punctuation">.</span>isPlaying<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"いただきます"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Func&lt;Animation, IEnumerator&gt; nailpunch = animation =&gt;</span>
    <span class="token comment">//{</span>
    <span class="token comment">//    yield return new WaitWhile(() =&gt; animation.isPlaying);</span>
    <span class="token comment">//    Debug.Log("いただきます");</span>
    <span class="token comment">//};</span>
            
    <span class="token comment">// ジェネリックやデフォルト引数を使える</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">nailpunch</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">T</span> count <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">struct</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token comment">//Action&lt;T&gt; nailpunch = (count = default) =&gt; { };</span>

    <span class="token comment">// C#8からはstaticを付けてクロージャを避けられるようになった</span>
    <span class="token class-name"><span class="token keyword">var</span></span> twin <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">nailpunch</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> count<span class="token punctuation">)</span>            <span class="token operator">=&gt;</span> count<span class="token punctuation">;</span>        <span class="token comment">// ○</span>
    <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">twinNailpunch</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> count<span class="token punctuation">)</span>        <span class="token operator">=&gt;</span> count <span class="token operator">*</span> twin<span class="token punctuation">;</span> <span class="token comment">// ○</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">nailpunch</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> count<span class="token punctuation">)</span>     <span class="token operator">=&gt;</span> count<span class="token punctuation">;</span>        <span class="token comment">// ○</span>
  <span class="token comment">//static int twinNailpunch(int count) =&gt; count * twin; // ×</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>関数内で関数を作りたい場合は、ローカル関数の方が使いやすそうです(クロージャの最適化もあるよう)。<br> ただ自分はなかなかこういう書き方をしないですが・・・(見づらくなるのでちゃんとメソッドを定義する)。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">関数内で関数は再帰呼び出しで使ったことがあるくらいかなぁ。でも思い返してみるとコストに見合ってたかは微妙かも。</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">そういうことしたい人も中にはいるんじゃね？</div></div></div></div><div class="concept-box5"><p> <a href="https://ufcpp.net/study/csharp/functional/fun_localfunctions/#capture-local" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】ローカル変数の捕獲</a></p></div><h2><span id="LINQusersSelectuser_gt_userIdWhereid_gt_id_1First">LINQ：users.Select(user =&gt; user.Id).Where(id =&gt; id == 1).First()</span></h2><p><code>LINQ</code>を使うことでループ処理が簡潔に書けます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// System.LinqをインポートするとLINQメソッドが使えるようになる</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>

<span class="token comment">// 5以下の最初のidを "ID:{id}" というテキストにしたい</span>
<span class="token class-name"><span class="token keyword">var</span></span> ids <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// これが</span>
<span class="token class-name"><span class="token keyword">var</span></span> text <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> id <span class="token keyword">in</span> ids<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        text <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"ID:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">id</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span> <span class="token comment">// "ID:1"</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// こう書ける</span>
<span class="token class-name"><span class="token keyword">var</span></span> text <span class="token operator">=</span> ids<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>id <span class="token operator">=&gt;</span> id <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>id <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"ID:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">id</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "ID:1"</span>
<span class="token comment">// Where ：5以下のidに絞って( 1, 3, 5 )</span>
<span class="token comment">// Select：idをテキストに変換し( "ID:1", "ID:3", "ID:5" )</span>
<span class="token comment">// First ：最初のものを取得( "ID:1" )</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">よく使う使い方</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">class</span> <span class="token class-name">Monster</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span>  Id      <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> IsBoss  <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> IsAlive <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> IsDead  <span class="token operator">=&gt;</span> <span class="token operator">!</span>IsAlive<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Monster<span class="token punctuation">[</span><span class="token punctuation">]</span></span> monsters<span class="token punctuation">;</span>

<span class="token comment">// 絞ったり変えたり(基本操作)</span>
<span class="token comment">// Where ：条件を満たす要素を返す</span>
<span class="token comment">// Select：新しい要素に変える</span>
<span class="token class-name"><span class="token keyword">var</span></span> aliveMonsterIds <span class="token operator">=</span> monsters<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>IsAlive<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> aliveMonsterId <span class="token keyword">in</span> aliveMonsterIds<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
            
<span class="token comment">// リスト内に1つしかないものを探す</span>
<span class="token comment">// FirstOrDefault：条件を満たす最初の要素か既定値を返す(Firstだとない場合に例外が吐かれるので大体FirstOrDefaultを使う)</span>
<span class="token class-name"><span class="token keyword">var</span></span> boss <span class="token operator">=</span> monsters<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>IsBoss<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>boss <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
            
<span class="token comment">// 簡易な全体チェック</span>
<span class="token comment">// Any：条件をいずれか満たすか</span>
<span class="token comment">// All：条件を全て満たすか</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>monsters<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>IsAlive<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// まだ誰か生きてるか</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>monsters<span class="token punctuation">.</span><span class="token function">All</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>IsDead<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 全員倒したか</span>

<span class="token comment">// {id1}, {id2}, {id3}... みたいなデバッグ出力(ザッと中身を確認したい時)</span>
<span class="token comment">// Aggregate：要素を集計する (1, 2) → (2, 3) → (3, 4)...</span>
<span class="token class-name"><span class="token keyword">var</span></span> debugText <span class="token operator">=</span> monsters<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Id<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Aggregate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>id1<span class="token punctuation">,</span> id2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">id1</span><span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">id2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>debugText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "1, 2. 3, 4, 5"</span>

<span class="token comment">// カンマ区切り文字列をint配列にしたい</span>
<span class="token comment">// ToArray：配列に変える</span>
<span class="token class-name"><span class="token keyword">var</span></span> monsterIds <span class="token operator">=</span> <span class="token string">"1, 2, 3, 4, 5"</span><span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string character">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>id <span class="token operator">=&gt;</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 操作するからリストで持ちたい</span>
<span class="token comment">// ToList：リストに変える</span>
<span class="token class-name"><span class="token keyword">var</span></span> animations <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponentsInChildren</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 図鑑で使うからソートしたい</span>
<span class="token comment">// OrderBy          ：昇順</span>
<span class="token comment">// OrderByDescending：降順</span>
<span class="token class-name"><span class="token keyword">var</span></span> ascMonsters  <span class="token operator">=</span> monsters<span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// Id：1, 2. 3, 4, 5</span>
<span class="token class-name"><span class="token keyword">var</span></span> descMonsters <span class="token operator">=</span> monsters<span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Id：5, 4. 3, 2, 1</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>自分はユーザ環境では<code>LINQ</code>は使わず、ユーザに影響しない環境(ツール開発など)では多用してます。<br> 誤ってメモリを食いやすいからです(よくあるのは無駄に<code>ToArray()</code>、<code>ToList()</code>してしまうとか)。<br> 正しく使えれば強力なのですが、実際、以前作ったソシャゲでボトルネックになったこともあって、ルールを制限して使用しています。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">「ユーザ環境では使わない」という制約と<br>「ユーザ環境で使った場合は命を絶つ」という誓約か</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">え・・・？</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/M4u2/blob/master/Assets/M4u2/Plugins/Binding/M4uHierarchyIcon.cs#L66" rel="noopener noreferrer" target="_blank">【M4u2】M4uHierarchyIcon.cs</a> / <a href="https://github.com/okamura0510/M4u2/blob/master/Assets/M4u2/Plugins/Binding/M4uBindingEditor.cs#L179" rel="noopener noreferrer" target="_blank">M4uBindingEditor.cs</a><br> <a href="https://techblog.kayac.com/unity_advent_calendar_2018_20" rel="noopener noreferrer" target="_blank">【Unity】LINQのパフォーマンス検証 – KAYAC engineers' blog</a><br> <a href="https://johobase.com/linq-method-list/" rel="noopener noreferrer" target="_blank">LINQ 拡張メソッド一覧 | JOHOBASE</a></p></div><h2><span id="using_namespace_class_Property_Method">クラスのカタチ：using, namespace, class, Property, Method</span></h2><p>よく使うクラスのカタチをまとめました。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>                 <span class="token comment">// usingディレクティブ</span>
<span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">UnityEngine<span class="token punctuation">.</span>Debug</span><span class="token punctuation">;</span>    <span class="token comment">// using staticディレクティブ</span>
<span class="token keyword">using</span> <span class="token class-name">Random</span> <span class="token operator">=</span> <span class="token class-name">UnityEngine<span class="token punctuation">.</span>Random</span><span class="token punctuation">;</span> <span class="token comment">// usingエイリアス</span>

<span class="token keyword">namespace</span> Unisharp <span class="token comment">// 名前空間</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token comment">// クラス</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span> SkillCount              <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>         <span class="token comment">// 定数：const</span>
        <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">Vector2</span> PowerSize <span class="token operator">=</span> Vector2<span class="token punctuation">.</span>one<span class="token punctuation">;</span> <span class="token comment">// 定数：static readonly</span>

        <span class="token punctuation">[</span>SerializeField<span class="token punctuation">]</span> <span class="token class-name">Powerkun</span> powerkun<span class="token punctuation">;</span> <span class="token comment">// 変数</span>
        <span class="token class-name">SceneType</span> type<span class="token punctuation">;</span>
        <span class="token class-name">Skill<span class="token punctuation">[</span><span class="token punctuation">]</span></span> skills <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Skill</span><span class="token punctuation">[</span>SkillCount<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> IsStarted    <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// プロパティ</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">SceneType</span> Type    <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token operator">=&gt;</span> type<span class="token punctuation">;</span> <span class="token keyword">set</span> <span class="token operator">=&gt;</span> type <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Powerkun</span> Powerkun <span class="token operator">=&gt;</span> powerkun<span class="token punctuation">;</span>
        
        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// メソッド</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> skills<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                skills<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Skill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name"><span class="token keyword">var</span></span> powerSkill <span class="token operator">=</span> <span class="token function">GetSkill</span><span class="token punctuation">(</span>Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> skills<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// UnityEngine.Random</span>
            powerkun<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span>PowerSize<span class="token punctuation">,</span> powerSkill<span class="token punctuation">)</span><span class="token punctuation">;</span>

            IsStarted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"StartingOver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Debug.Log</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name">Skill</span> <span class="token function">GetSkill</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> idx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> skills<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">名前空間：クラス等を名前空間ごとに分けて管理出来る(フォルダ分けに似た仕組み)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 名前空間を分けることでクラス名の重複を避けられる</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
    <span class="token punctuation">{</span>
        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> battlePlayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Battle<span class="token punctuation">.</span>Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Unisharp.Battle.Player がフルネームだけど親名は省略出来る</span>
            <span class="token class-name"><span class="token keyword">var</span></span> storyPlayer  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Story<span class="token punctuation">.</span>Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Battle</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// バトル担当が作ったプレイヤークラス</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Story</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// ストーリー担当が作ったプレイヤークラス</span>
<span class="token punctuation">}</span>

<span class="token comment">// 名前空間は便利だけど、分けすぎると探すのが大変(フォルダ分けしすぎて逆に管理しづらいのと一緒)</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Common</span>    <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// なんかいろいろ入ってそう・・・</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Manager</span>   <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Character</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// Player/Enemy関連も混ざってたり。。</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Player</span>    <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Enemy</span>     <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>UI</span>        <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// UI全部？</span>

<span class="token comment">// プログラマ3人で「アプリ全般」「バトル」「ストーリー」で分担しよう(このくらいシンプルで十分)</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp</span>        <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Battle</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Story</span>  <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// 【重要】 Unisharp という一番上の名前は頻繁に使われるので超大事(開発コードや愛着のある名前にするのがオススメ)</span>
<span class="token keyword">namespace</span> <span class="token namespace">Maze</span>     <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 迷路を題材にしたゲームだから Maze</span>
<span class="token keyword">namespace</span> <span class="token namespace">G2U4S</span>    <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// アセット名をそのまま名前にすれば利用者も分かりやすい</span>
<span class="token keyword">namespace</span> <span class="token namespace">Unisharp</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 左手から「Unity」、右手から「C#」 ・・・ Unisharp！</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">usingディレクティブ：名前空間の指定を省略出来る</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Unisharp<span class="token punctuation">.</span>Battle</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Unisharp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
    <span class="token punctuation">{</span>
        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Unisharp.Battle.Player → Player</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"StartingOver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// UnityEngine.Debug      → Debug</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">using staticディレクティブ：型名の指定を省略して静的メンバを呼べる</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">UnityEngine<span class="token punctuation">.</span>Debug</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">Unisharp<span class="token punctuation">.</span>AppConst</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">static</span> <span class="token class-name">Unisharp<span class="token punctuation">.</span>Dir</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Unisharp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Dir</span> dir<span class="token punctuation">;</span>

        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"StartingOver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Debug.Log         → Log</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>Version <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// AppConst.Version  → Version</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>IsEditor<span class="token punctuation">)</span>     <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// AppConst.IsEditor → IsEditor</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dir <span class="token operator">==</span> Up<span class="token punctuation">)</span>    <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// Dir.Up            → Up</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> <span class="token namespace">Unisharp</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AppConst</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span>            Version  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsEditor <span class="token operator">=</span> Application<span class="token punctuation">.</span>isEditor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Dir</span> <span class="token punctuation">{</span> Up<span class="token punctuation">,</span> Right<span class="token punctuation">,</span> Down<span class="token punctuation">,</span> Left <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">usingエイリアス：名前空間または型の別名を付けれれる</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// usingした時に同名クラスがあった場合・・・</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span> <span class="token comment">// UnityEngine.Random</span>
<span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>      <span class="token comment">// System.Random</span>

<span class="token comment">//Random.Range(0, 3);           // ×：こう書きたいけど2つあって分からない</span>
UnityEngine<span class="token punctuation">.</span>Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ○：こう書く必要がある</span>

<span class="token comment">// エイリアスを付ければ解決</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token class-name">Random</span> <span class="token operator">=</span> <span class="token class-name">UnityEngine<span class="token punctuation">.</span>Random</span><span class="token punctuation">;</span>

Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Random = UnityEngine.Random となってるのでOK</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">プロパティ：外部公開する変数をメソッドを通してアクセスするようにした方法(C#ではそれを機能化した)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> 
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">;</span>

    <span class="token comment">// 変数は直接 public にせず Get{変数名} Set{変数名} というメソッドを通してアクセスするのがセオリー</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetId</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// プロパティはそれをこう書けるようにした機能</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token comment">// GetId()</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> id<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span> <span class="token comment">// SetId(int value)</span>
        <span class="token punctuation">{</span>
            id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 自動プロパティを使えば変数の定義がいらなくなる(コンパイラが __id みたいな変数を勝手に作ってくれる)</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token comment">// get { return __id;  }</span>
        <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token comment">// set { __id = value; }</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// あとは概ねいろんな書き方があるってだけ(後からいろいろ追加されてった)</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> id<span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token comment">// getだけ可能</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">set</span> <span class="token punctuation">{</span> id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token comment">// setだけ可能</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>           <span class="token comment">// 長いので1行で書いちゃう</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span>         <span class="token punctuation">{</span> <span class="token keyword">return</span> id<span class="token punctuation">;</span>  <span class="token punctuation">}</span>
        <span class="token keyword">private</span> <span class="token keyword">set</span> <span class="token punctuation">{</span> id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>       <span class="token comment">// getとsetでアクセサレベルを変えられる</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token comment">// 【C#6.0】自動プロパティに初期値が指定出来るようになった</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> id<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>  <span class="token comment">// 【C#6.0】getのみのプロパティが</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token operator">=&gt;</span> id<span class="token punctuation">;</span>                  <span class="token comment">// こう書けるようになった( =&gt; の簡易文法 )</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> Id                         <span class="token comment">// 【C#7.0】両方とも =&gt; が使えるようになった</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> id<span class="token punctuation">;</span>
        <span class="token keyword">set</span> <span class="token operator">=&gt;</span> id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 短い書き方をまとめると</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>                     <span class="token comment">// 変数いらない</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token operator">=&gt;</span> id<span class="token punctuation">;</span>                            <span class="token comment">// 変数の取得だけしたい</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token operator">=&gt;</span> id<span class="token punctuation">;</span> <span class="token keyword">set</span> <span class="token operator">=&gt;</span> id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// 変数をラップしたい</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> Id                                   <span class="token comment">// 設定だけ処理を書きたい</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> id<span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">=&gt;：メソッドやプロパティなどの簡易文法(関数が1つの式で表せる場合に使える)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> ids <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// インデクサー</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">int</span></span> i<span class="token punctuation">]</span> <span class="token operator">=&gt;</span> ids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                                <span class="token comment">// 【C#6.0】</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword">int</span></span> i<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token operator">=&gt;</span> ids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">set</span> <span class="token operator">=&gt;</span> ids<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// 【C#7.0】</span>

    <span class="token comment">// プロパティ</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Ids <span class="token operator">=&gt;</span> ids<span class="token punctuation">;</span>                             <span class="token comment">// 【C#6.0】</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Ids <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token operator">=&gt;</span> ids<span class="token punctuation">;</span> <span class="token keyword">set</span> <span class="token operator">=&gt;</span> ids <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// 【C#7.0】</span>

    <span class="token comment">// コンストラクタ</span>
    <span class="token keyword">public</span> <span class="token function">Scene</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> ids<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ids <span class="token operator">=</span> ids<span class="token punctuation">;</span> <span class="token comment">// 【C#7.0】</span>

    <span class="token comment">// メソッド</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span>  <span class="token function">GetId</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i<span class="token punctuation">)</span>    <span class="token operator">=&gt;</span> ids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token comment">// 【C#6.0】</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 【C#6.0】</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>Unityだとクラスをコンポーネントにするか(<code>MonoBehaviour</code>にするか)、普通のクラスにするか迷うと思います。<br> 正直、一概には言えないんですけど、自分はこのようにしてます。</p><ul><li>コンポーネント：数が少なくてUnityエディタで値を確認したいもの(<code>Powerkun</code>みたいな個体とか)</li><li>普通のクラス：数が多くて<code>Start</code>や<code>Update</code>が不要なもの(<code>Skill</code>みたいなデータとか)</li></ul><p>コンポーネントは便利ですが、その分メモリを食います。なので、そこらへんはバランスかなぁって思います。<br> 個人的には、よっぽど大規模なゲームでない限りコンポーネント指向でいいかと思います。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">コンポーネント作るの楽しくて肝心のゲーム制作が全然進まなかったことがあるよ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">本末転倒だろ</div></div></div></div> <a href="https://tempura-kingdom.jp/component/" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_component_0705-320x180.jpg" class="blog-card-thumb-image wp-post-image" alt="" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">Unityでのコンポーネント指向のあれこれ</span><span class="blog-card-excerpt">ここ最近コンポーネント指向にハマってたことがあって、あれこれいろいろ試してた。
そこらへんをまとめておく。  己の肉体と技術に...</span></div></div></a><h2><span id="staticstatic_class">staticクラス：static class</span></h2><p><code>static</code>メンバのみ持てるクラスです。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 定数</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Const</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span>         Version <span class="token operator">=</span> <span class="token string">"3.2.1"</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsIOS   <span class="token operator">=</span> Application<span class="token punctuation">.</span>platform <span class="token operator">==</span> RuntimePlatform<span class="token punctuation">.</span>IPhonePlayer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ユーティル</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Util</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Conditional</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"DEBUG"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 拡張メソッド</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Extensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetPositionX</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetPositionY</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetPositionZ</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Transform</span> t<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> z<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> t<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token comment">// ネイティブプラグイン</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Plugin</span>
<span class="token punctuation">{</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_IOS</span>
    <span class="token punctuation">[</span><span class="token function">DllImport</span><span class="token punctuation">(</span><span class="token string">"__Internal"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">getUsedMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> <span class="token function">GetUsedMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_IOS</span>
        <span class="token keyword">return</span> <span class="token function">getUsedMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">else</span></span>
        <span class="token keyword">return</span> GC<span class="token punctuation">.</span><span class="token function">GetTotalMemory</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span> Profiler<span class="token punctuation">.</span>usedHeapSizeLong<span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p><code>static</code>で定義が必要なものは用途ごとに分けることで、コードが分かりやすくなります。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content"><code>Util</code>クラスのような<code>public static</code>メソッドが初心者の頃は多かったけど、今ではほとんどなくなって、成長を実感したよ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content"><a href="https://xtech.nikkei.com/it/atcl/watcher/14/334361/122100450/" rel="noopener noreferrer" target="_blank">staticおじさん</a>にはなれなかったか…</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">なんでちょっと残念そうなの？</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/GameData/GameConst.cs" rel="noopener noreferrer" target="_blank">【Squares】GameConst.cs</a><br> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/App/Extension.cs" rel="noopener noreferrer" target="_blank">【Squares】Extension.cs</a></p></div><h2><span id="partialpartial_class">partialクラス：partial class</span></h2><p>クラスを複数ファイルに分割出来ます(コンパイル時に1つのクラスに結合されます)。</p><p class="prism-title">MapEnum.cs</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// Auto-generated files</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Dir</span> <span class="token punctuation">{</span> Up<span class="token punctuation">,</span> Right<span class="token punctuation">,</span> Down<span class="token punctuation">,</span> Left <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Subenum</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsUp</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Dir</span> <span class="token keyword">value</span><span class="token punctuation">)</span>    <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">==</span> Dir<span class="token punctuation">.</span>Up<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsRight</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Dir</span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">==</span> Dir<span class="token punctuation">.</span>Right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsDown</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Dir</span> <span class="token keyword">value</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">==</span> Dir<span class="token punctuation">.</span>Down<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsLeft</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Dir</span> <span class="token keyword">value</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">==</span> Dir<span class="token punctuation">.</span>Left<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">CharacterEnum.cs</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// Auto-generated files</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Motion</span> <span class="token punctuation">{</span> Idle<span class="token punctuation">,</span> Move<span class="token punctuation">,</span> Attack <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Subenum</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsIdle</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Motion</span> <span class="token keyword">value</span><span class="token punctuation">)</span>   <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">==</span> Motion<span class="token punctuation">.</span>Idle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsMove</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Motion</span> <span class="token keyword">value</span><span class="token punctuation">)</span>   <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">==</span> Motion<span class="token punctuation">.</span>Move<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsAttack</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Motion</span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">==</span> Motion<span class="token punctuation">.</span>Attack<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>G2U4Sの<code>Subenum</code>は<code>partial</code>クラスを使用しています。<br> <code>Subenum</code>はひとことでいうと、<code>enum</code>の拡張メソッドをツールで自動生成した機能です。<br> 自動生成だとクラスが増えるのでメモリ節約のためと、拡張メソッドはクラス名がそれほど重要ではないので、この形にしました。</p><p>ただし<code>partial</code>クラスは安易に使うとコードが追いづらくなるので注意です(基本使わない方がいい)。<br> 同名クラスが散らばってると、目的のものを探すのに苦労します。。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">昔、Windowsフォームアプリケーションでダブルクリックした時に勝手にイベントが作られてたけど、<code>partial</code>を使ってたんだね〜</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">なるほど、自動生成コードと実際に触るコードを分ければ、やりたいことに集中出来るわけだな</div></div></div></div><div class="jin-yohaku10"></div><blockquote><p> <a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/keywords/partial-type#remarks" rel="noopener noreferrer" target="_blank">【MicrosoftDocs】partial 型</a><br> 大規模なプロジェクトや、Windows フォーム デザイナーで自動生成されるコードを処理する場合に役立ちます。</p></blockquote><div class="jin-yohaku10"></div> <a href="https://tempura-kingdom.jp/g2u4s/#Subenum" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_g2u4s_0_0705-320x180.jpg" class="blog-card-thumb-image wp-post-image" alt="" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">〝 G2U4S 〟G2Uで読み込んだゲームデータを1クリックでScriptableObjectに変換</span><span class="blog-card-excerpt">日本語 / English  G2U4Sは、SpreadsheetやExcelで作成したゲームデータを1クリックでScr...</span></div></div></a><h2><span id="ltTgt_where_T_class">ジェネリック：&lt;T&gt; where T : class</span></h2><p>型だけ違って処理内容が同じクラスやメソッドを定義出来ます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// ジェネリッククラス</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// どんな型が来ても処理内容を同じに出来る</span>
    <span class="token class-name">T</span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">UnisharpObject</span><span class="token punctuation">(</span><span class="token class-name">T</span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 型制約</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Component</span></span>
<span class="token punctuation">{</span>
    <span class="token class-name">T</span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">UnisharpObject</span><span class="token punctuation">(</span><span class="token class-name">T</span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>

    <span class="token comment">// 制約を設けることでComponentのメンバが使える</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">GameObject</span> GameObject <span class="token operator">=&gt;</span> <span class="token keyword">value</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">struct</span></span>       <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 値型</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">class</span></span>        <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 参照型</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IList</span></span>        <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 指定インターフェイス(継承先も)</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Component</span></span>    <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 指定クラス(継承先も)</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 引数なしコンストラクタを要求(実行速度が遅いので注意)</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">unmanaged</span></span>    <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 【C#7.3】アンマネージ型(unsafeコードで使用)</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Enum</span></span>         <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 【C#7.3】System.Enum型</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Delegate</span></span>     <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 【C#7.3】System.Delegate型</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">notnull</span></span>      <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 【C#8.0】null非許容型(C#8からnull非許容の機能が追加された)</span>
<span class="token keyword">class</span> <span class="token class-name">UnisharpObject<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">IList</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 2つ以上も指定出来る</span>

<span class="token comment">// ジェネリックインターフェイス</span>
<span class="token keyword">interface</span> <span class="token class-name">IUnisharpList<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IList<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// ジェネリックメソッド</span>
<span class="token return-type class-name">T</span> <span class="token generic-method"><span class="token function">LoadResource</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> path<span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Object</span></span> <span class="token operator">=&gt;</span> Resources<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Load</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// こんな感じで使う</span>
<span class="token class-name"><span class="token keyword">var</span></span> uo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UnisharpObject<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> go <span class="token operator">=</span> <span class="token generic-method"><span class="token function">LoadResource</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Unisharprefab"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">ジェネリッククラス：MVVMでいろいろな型をバインド</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token class-name">M4uProperty<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span>    userId   <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">M4uProperty<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">M4uProperty<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> userName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">M4uProperty<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span>    UserId   <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> userId<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>   <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{</span> userId<span class="token punctuation">.</span>Value   <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> userName<span class="token punctuation">.</span>Value<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">set</span> <span class="token punctuation">{</span> userName<span class="token punctuation">.</span>Value <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">M4uProperty<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">T</span> Value <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">ジェネリックメソッド：型だけ違うPrefabを読み込む(リソースマネージャ)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token return-type class-name">T</span> <span class="token generic-method"><span class="token function">LoadPrefab</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">Transform</span> parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Component</span></span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> path <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"Prefabs/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>Resources<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Load</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>ジェネリックはやりすぎると抽象化しすぎて分かりづらくなるので注意です(ご使用は慎重に)。<br> 同じ構造で型だけ違うキャラクターをジェネリッククラスで作る、とかやり始めるとヤバイです(過去の自分)。<br> そういう場合はコンポーネント指向の検討を。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">俺とお前じゃ全然違うからジェネリックとか無理じゃね？</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">ぐっ…(なんもいえねぇ)</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/M4u/blob/master/Assets/M4u/Scripts/M4uProperty.cs#L11" rel="noopener noreferrer" target="_blank">【M4u】M4uProperty.cs</a><br> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/Game/Square.cs#L42" rel="noopener noreferrer" target="_blank">【Squares】Square.cs</a> / <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/App/Resource.cs#L13" rel="noopener noreferrer" target="_blank">Resource.cs</a><br> <a href="https://ufcpp.net/study/csharp/sp2_generics.html#new-constrants" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】補足: new() 制約</a></p></div> <a href="https://tempura-kingdom.jp/component/" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_component_0705-320x180.jpg" class="blog-card-thumb-image wp-post-image" alt="" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">Unityでのコンポーネント指向のあれこれ</span><span class="blog-card-excerpt">ここ最近コンポーネント指向にハマってたことがあって、あれこれいろいろ試してた。
そこらへんをまとめておく。  己の肉体と技術に...</span></div></div></a><h2><span id="Listltintgt_Dictionaryltint_stringgt">コレクション：List&lt;int&gt;, Dictionary&lt;int, string&gt;</span></h2><p>よく使うジェネリックコレクションです。適切に使えばコードの意図が分かりやすくなります。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// List：インデックスアクセスしたい時(最初のオブジェクトを取得したいなぁ)</span>
<span class="token class-name"><span class="token keyword">var</span></span> squares     <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Square<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> firstSquare <span class="token operator">=</span> squares<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Dictionary：キーアクセスしたい時(キャッシュしておいてメモリ節約したいなぁ)</span>
<span class="token class-name"><span class="token keyword">var</span></span> cacheTextures <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> Texture<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> loadTexture   <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token type-expression class-name">Texture</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>cacheTextures<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    loadTexture <span class="token operator">=</span> cacheTextures<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{</span>
    loadTexture <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Load</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Stack：先頭に追加→先頭から取り出したい時(アンドゥ：直近のスタンプを1つ消したいなぁ)</span>
<span class="token class-name"><span class="token keyword">var</span></span> stampIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Stack<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stampIds<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stampIds<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stampIds<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> stampId <span class="token keyword">in</span> stampIds<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 3</span>
    <span class="token comment">// 2</span>
    <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3</span>
<span class="token class-name"><span class="token keyword">var</span></span> removedStampId <span class="token operator">=</span> stampIds<span class="token punctuation">.</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取得と同時に削除される</span>

<span class="token comment">// Queue：後ろに追加→先頭から取り出したい時(コマンドを予約しといて順次実行させたいなぁ)</span>
<span class="token class-name"><span class="token keyword">var</span></span> commandIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Queue<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
commandIds<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
commandIds<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
commandIds<span class="token punctuation">.</span><span class="token function">Enqueue</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> commandId <span class="token keyword">in</span> commandIds<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 1</span>
    <span class="token comment">// 2</span>
    <span class="token comment">// 3</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token class-name"><span class="token keyword">var</span></span> executedCommandId <span class="token operator">=</span> commandIds<span class="token punctuation">.</span><span class="token function">Dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取得と同時に削除される</span>

<span class="token comment">// SortedList/SortedDictionary：キーでソートしておいて高速検索したい時(ボトルネックを解消したいなぁ)</span>
<span class="token comment">// SortedList                 ：小メモリ・インデックスアクセス可能</span>
<span class="token comment">// SortedDictionary           ：追加・削除速い</span>
<span class="token class-name"><span class="token keyword">var</span></span> items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SortedList<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"微笑みの爆弾"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"希望の底"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"アクアウィタエ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> selectedItem <span class="token operator">=</span> items<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 微笑みの爆弾</span>

<span class="token comment">// HashSet/SortedSet：値が重複せず、数学の集合操作のようなことをやりたい時(重複なし保存をしたいなぁ)</span>
<span class="token comment">// SortedSet        ：ソートされる</span>
<span class="token class-name"><span class="token keyword">var</span></span> createdDataTypes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
createdDataTypes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"int"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
createdDataTypes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"GameData"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
createdDataTypes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"int"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> type <span class="token keyword">in</span> createdDataTypes<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// int</span>
    <span class="token comment">// GameData</span>
<span class="token punctuation">}</span> 

<span class="token comment">// LinkedList：追加・削除を高速化したい時(自分は使ったことないが、参考リンクが分かりやすい)</span>
<span class="token class-name"><span class="token keyword">var</span></span> cards          <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LinkedList<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> babyDragon     <span class="token operator">=</span> cards<span class="token punctuation">.</span><span class="token function">AddFirst</span><span class="token punctuation">(</span><span class="token string">"BabyDragon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> alligatorSword <span class="token operator">=</span> cards<span class="token punctuation">.</span><span class="token function">AddBefore</span><span class="token punctuation">(</span>babyDragon<span class="token punctuation">,</span> <span class="token string">"AlligatorSword"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> polymerization <span class="token operator">=</span> cards<span class="token punctuation">.</span><span class="token function">AddLast</span><span class="token punctuation">(</span><span class="token string">"Polymerization"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> card <span class="token keyword">in</span> cards<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// AlligatorSword</span>
    <span class="token comment">// BabyDragon</span>
    <span class="token comment">// Polymerization</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>いろいろありますが、あとはメモリや速度にどれだけ気を使いたいかによるかもです。<br> 自分はなるべくデータ構造をシンプルにしたいので、基本<code>List</code>か<code>Dictionary</code>しか使わないです。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content"><code>Stack</code>や<code>Queue</code>を使えた時の型にハマった感が好きなんだけど、結局改修していくうちに<code>List</code>が使いたくなるんだよね〜</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">使い慣れたものの方が応用利くしな</div></div></div></div><div class="concept-box5"><p> <a href="https://smdn.jp/programming/netfx/collections/2_generic_0_abstract/" rel="noopener noreferrer" target="_blank">ジェネリックコレクション – 総武ソフトウェア推進所</a><br> <a href="https://techblog.kayac.com/effective-linked-list" rel="noopener noreferrer" target="_blank">連結リスト(LinkedList)の使い所 – KAYAC engineers’s blog</a></p></div><h2><span id="nameofstring_a_nameofa">nameof演算子：string a = nameof(a)</span></h2><p>型、変数、メンバの名前を取得出来ます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp">name <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>Transform<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// "Transform"</span>
name <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// "transform"</span>
name <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "position"</span>
name <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>Find<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// "Find"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">こうしておけばコンポーネント名が変わった時に気付ける</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// コンポーネントメニュー</span>
<span class="token punctuation">[</span><span class="token function">AddComponentMenu</span><span class="token punctuation">(</span><span class="token string">"M4u2/"</span> <span class="token operator">+</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>M4uBinding<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">M4uBinding</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// コンポーネント名になってるPrefabを読み込む</span>
<span class="token class-name"><span class="token keyword">var</span></span> square <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Load</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Square<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Square<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">G2U4Sではテンプレートファイルと変数名を一緒にしてエラーを検知出来るようにした</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
ScriptableObjectTemplate <span class="token operator">=</span> File<span class="token punctuation">.</span><span class="token function">ReadAllText</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">templatesDir</span><span class="token punctuation">}</span></span><span class="token string">/ScriptableObjectTemplate.txt"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
<span class="token comment">// こう書ける</span>
ScriptableObjectTemplate <span class="token operator">=</span> File<span class="token punctuation">.</span><span class="token function">ReadAllText</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">templatesDir</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">nameof</span><span class="token punctuation">(</span>ScriptableObjectTemplate<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">.txt"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">ScriptableObjectTemplate.txt</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// Auto-generated files</span>
<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>

<span class="token keyword">namespace</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// {2}</span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span> <span class="token punctuation">:</span> ScriptableObject
    <span class="token punctuation">{</span>
<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p><code>nameof</code>を使用すると名前が変わった時にエラーが出るのでミスを防げます。<br> 名前の一貫性を助けるのにも便利です。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">まぁやりすぎると修正めんどくさくなるけどね</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">てんぷらは適当なのかキッチリしてるのか分からんな</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">うん、よく言われる笑</div></div></div></div> <a href="https://tempura-kingdom.jp/g2u4s/#ScriptableObject" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_g2u4s_0_0705-320x180.jpg" class="blog-card-thumb-image wp-post-image" alt="" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">〝 G2U4S 〟G2Uで読み込んだゲームデータを1クリックでScriptableObjectに変換</span><span class="blog-card-excerpt">日本語 / English  G2U4Sは、SpreadsheetやExcelで作成したゲームデータを1クリックでScr...</span></div></div></a><h2><span id="nullab">null条件演算子：a?.b</span></h2><p><code>null</code>でなければ〜、のような<code>null</code>チェックを<code>?</code>で繋げて書けます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>map <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> cell <span class="token operator">=</span> map<span class="token punctuation">.</span>Cell<span class="token punctuation">;</span>

<span class="token comment">// こう書ける</span>
cell <span class="token operator">=</span> map<span class="token punctuation">?.</span>Cell<span class="token punctuation">;</span>

<span class="token comment">// nullでなければメソッドを呼ぶ、ということも出来る</span>
map<span class="token punctuation">?.</span>Cell<span class="token punctuation">.</span><span class="token function">SetPosition</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ?を繋げて書くことも出来る(値型の場合はnull許容値型になることに注意)</span>
<span class="token class-name">Renderer</span> renderer <span class="token operator">=</span> map<span class="token punctuation">?.</span>Cell<span class="token punctuation">?.</span>Renderer<span class="token punctuation">;</span>
<span class="token class-name">Vector3<span class="token punctuation">?</span></span> position <span class="token operator">=</span> map<span class="token punctuation">?.</span>Cell<span class="token punctuation">?.</span>Position<span class="token punctuation">;</span>

<span class="token comment">// デリゲートはこう書ける</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>onMapTap <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">onMapTap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
onMapTap<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// インデクサーにも使える(map != null、map[0, 0] != null。見づらいけど・・・)</span>
<span class="token class-name"><span class="token keyword">var</span></span> renderer <span class="token operator">=</span> map<span class="token punctuation">?</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">?.</span>Renderer<span class="token punctuation">;</span>

<span class="token comment">// ただしUnityのオブジェクトはnullチェックが拡張されてるので注意(破棄された場合の挙動が怪しい)</span>
<span class="token comment">//var renderer = destructibleObject?.GetComponent&lt;Renderer&gt;();</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>簡易な<code>null</code>チェックや、デリゲートに使うと便利です(デリゲートは大抵<code>null</code>チェックが入るので)。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">こういう機能が入るくらいだから皆よっぽど<code>null</code>に苦しめられてきたんだな</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">まじでそう。何度<code>null</code>チェック忘れてゲームがフリーズしたことか。。</div></div></div></div><div class="concept-box5"><p> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/Game/TouchEventTrigger.cs#L93-L95" rel="noopener noreferrer" target="_blank">【Squares】TouchEventTrigger.cs</a><br> <a href="https://github.com/okamura0510/Squares/blob/master/Assets/Squares/Scripts/Scene/Game.cs#L71" rel="noopener noreferrer" target="_blank">【Squares】Game.cs</a></p></div><h2><span id="C80nulla_b">【C#8.0】null合体代入演算子：a ??= b</span></h2><p>左辺が<code>null</code>だったら右辺を入れる、という演算子です。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

<span class="token comment">// こう書ける</span>
instance <span class="token operator">??=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">プロパティアクセス時にGetComponentしたい</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// いつでも必要ではないので使う時に初期化したい</span>
<span class="token class-name">SpecialSkill</span> specialSkill<span class="token punctuation">;</span>

<span class="token comment">// これが</span>
<span class="token keyword">public</span> <span class="token return-type class-name">SpecialSkill</span> SpecialSkill
<span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>specialSkill <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> specialSkill <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SpecialSkill<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> specialSkill<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// こう書ける</span>
<span class="token keyword">public</span> <span class="token return-type class-name">SpecialSkill</span> SpecialSkill <span class="token operator">=&gt;</span> specialSkill <span class="token operator">??=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SpecialSkill<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p><code>null</code>なら初期化する、という用途に便利です。</p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">地味に便利だよ、これ</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">のちのちのコード量に効いてくるってやつか</div></div></div></div><h2><span id="_stringFormat__StringBuilder">文字列整形：@, string.Format, $, $@, StringBuilder</span></h2><p>特殊な文字列整形の方法です。</p><p class="prism-title">@(逐語的文字列)：\ をそのまま使える(通常は \\ のエスケープシーケンスにする必要がある)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp">path <span class="token operator">=</span>  <span class="token string">"C:\\Program Files\\Unity\\Unity.exe"</span><span class="token punctuation">;</span>
path <span class="token operator">=</span> <span class="token string">@"C:\Program Files\Unity\Unity.exe"</span><span class="token punctuation">;</span>
<span class="token comment">//      "C:\Program Files\Unity\Unity.exe"</span>
            
<span class="token comment">// ただし @ の場合 " は "" にする</span>
json <span class="token operator">=</span>  <span class="token string">"{ \"name\": \"Neterro\" }"</span><span class="token punctuation">;</span>
json <span class="token operator">=</span> <span class="token string">@"{ ""name"": ""Neterro"" }"</span><span class="token punctuation">;</span>
<span class="token comment">//      "{ "name": "Neterro" }"</span>

<span class="token comment">// @ の場合、改行がそのまま使える</span>
text <span class="token operator">=</span> <span class="token string">"心が正しく形を成せば想いとなり"</span> <span class="token operator">+</span> System<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span>NewLine <span class="token operator">+</span>
       <span class="token string">"　想いこそが実を結ぶのだ"</span><span class="token punctuation">;</span>
text <span class="token operator">=</span>
<span class="token string">@"心が正しく形を成せば想いとなり
　想いこそが実を結ぶのだ"</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">string.Format：文字列をフォーマット出来る</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp">hand <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
path <span class="token operator">=</span> <span class="token string">"Assets/ScriptableObjects/hand_"</span> <span class="token operator">+</span> hand <span class="token operator">+</span> <span class="token string">".asset"</span><span class="token punctuation">;</span>
path <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"Assets/ScriptableObjects/hand_{0}.asset"</span><span class="token punctuation">,</span>    hand<span class="token punctuation">)</span><span class="token punctuation">;</span>
path <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"Assets/ScriptableObjects/hand_{0:00}.asset"</span><span class="token punctuation">,</span> hand<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0埋めとかも出来る(書式指定)</span>
<span class="token comment">//     "Assets/ScriptableObjects/hand_1.asset"</span>
<span class="token comment">//     "Assets/ScriptableObjects/hand_01.asset"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">$(文字列挿入)：ダイレクトに挿入出来る(後でstring.Formatに置き換えられる)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp">path <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"Assets/ScriptableObjects/hand_{0}.asset"</span><span class="token punctuation">,</span> hand<span class="token punctuation">)</span><span class="token punctuation">;</span>
path <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"Assets/ScriptableObjects/hand_</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">hand</span><span class="token punctuation">}</span></span><span class="token string">.asset"</span></span><span class="token punctuation">;</span>
path <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"Assets/ScriptableObjects/hand_</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">hand</span><span class="token format-string"><span class="token punctuation">:</span>00</span><span class="token punctuation">}</span></span><span class="token string">.asset"</span></span><span class="token punctuation">;</span> <span class="token comment">// string.Formatと同じ書式指定を使える</span>
<span class="token comment">//      "Assets/ScriptableObjects/hand_1.asset"</span>
<span class="token comment">//      "Assets/ScriptableObjects/hand_01.asset"</span>

<span class="token comment">// ただし $ の場合 { } は {{ }} にする</span>
json <span class="token operator">=</span>  <span class="token string">"{ \"name\": \"Neterro\" }"</span><span class="token punctuation">;</span>
json <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"{{ \"name\": \"Neterro\" }}"</span></span><span class="token punctuation">;</span>
<span class="token comment">//      "{ "name": "Neterro" }"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">$@：同時に使える( \ を使いつつ挿入出来る)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp">unity <span class="token operator">=</span> <span class="token string">"Unity_2018.4"</span><span class="token punctuation">;</span>
path  <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$@"C:\Program Files\</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">unity</span><span class="token punctuation">}</span></span><span class="token string">\Unity.exe"</span></span><span class="token punctuation">;</span>
<span class="token comment">//        "C:\Program Files\Unity_2018.4\Unity.exe"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">StringBuilder：文字列生成コストを抑えられる(stringだと結合の度に新しい文字列が生成される)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 通信の度に巨大な文字列を生成するような場合</span>
id   <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
log  <span class="token operator">=</span> <span class="token string">"PvNUd3QSLC6F9kBytZNnUz84x3eYJqakWw7Wrehs4Ai985AEWKRcEAUpdeRxXMEMn4RitDHZV5zb5Xw4DSHHzmJMwP6kh3"</span><span class="token punctuation">;</span>
json <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"{{ \"id\": </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">id</span><span class="token punctuation">}</span></span><span class="token string">, \"log\": \"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">log</span><span class="token punctuation">}</span></span><span class="token string">\" }}"</span></span><span class="token punctuation">;</span>
<span class="token comment">//      "{ "id": 1, "log": "PvNUd3QSLC6F9kBytZNnUz84x3eYJqakWw7Wrehs4Ai985AEWKRcEAUpdeRxXMEMn4RitDHZV5zb5Xw4DSHHzmJMwP6kh3" }"</span>

<span class="token comment">// StringBuilderにすればメモリ節約になる</span>
<span class="token class-name"><span class="token keyword">var</span></span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 非同期でないならクラス変数にした方が尚良い(毎回 new せずに済む)</span>
sb<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token string">"{ \"id\": "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sb<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
sb<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token string">", \"log\": \""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sb<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
sb<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token string">"\" }"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
json <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// "{ "id": 1, "log": "PvNUd3QSLC6F9kBytZNnUz84x3eYJqakWw7Wrehs4Ai985AEWKRcEAUpdeRxXMEMn4RitDHZV5zb5Xw4DSHHzmJMwP6kh3" }"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>個人的な使い分けですが</p><ul style="margin-bottom: 5rem"><li><code>@</code>：ほとんど使ってないです(<code>/Applications/Unity/Unity.app</code> のようなパス指定にしますし・・・)</li><li><code>string.Format</code>：あらかじめ定数としてフォーマット文字列を定義したい場合に使います</li><li><code>$</code>：よく使います</li><li><code>StringBuilder</code>：よっぽどパフォーマンス改善したい時だけ使います(見づらいですし・・・)</li></ul><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">メモリが少ない環境でガンガン文字列連結してたらメモリが枯渇したことがあるよ。<code>StringBuilder</code>に救われたよ。</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">文字列って意外とメモリ食うんだな</div></div></div></div><div class="concept-box5"><p> <a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/strings/" rel="noopener noreferrer" target="_blank">【Microsoft Docs】文字列のエスケープ シーケンス</a><br> <a href="https://ufcpp.net/study/dotnet/bcl_format.html" rel="noopener noreferrer" target="_blank">【C# によるプログラミング入門】文字列の書式設定</a></p></div><h2><span id="SerializeField">属性：[SerializeField]</span></h2><p><code>public</code>や<code>private</code>のようなクラスやメンバへの追加情報です。</p><p class="prism-title">属性の使用</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 属性はクラスやフィールドなど、対象にしたいところの前に [属性名(パラメータ)] で指定する</span>

<span class="token comment">// Serializable属性：クラスをシリアル化する(Inspectorで表示出来るようになる)</span>
<span class="token punctuation">[</span>Serializable<span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parameter</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// RequireComponent属性：コンポーネント追加時、引数で指定したコンポーネントも追加する(必須コンポーネントの指定)</span>
<span class="token punctuation">[</span><span class="token function">RequireComponent</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">RectTransform</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// コンストラクタ引数でコンポーネントを指定</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Canvas</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// CreateAssetMenu属性：Assets/Create に ScriptableObject 作成メニューが出来る</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CreateAssetMenu</span><span class="token attribute-arguments"><span class="token punctuation">(</span>fileName <span class="token operator">=</span> <span class="token string">"GameData"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// 名前付きパラメータでファイル名を指定</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameData</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptableObject</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// SerializeField属性：フィールドをシリアル化する(Inspectorで表示出来るようになる)</span>
    <span class="token punctuation">[</span>SerializeField<span class="token punctuation">]</span>           <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ReadOnly</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">;</span> <span class="token comment">// 属性は2つ以上も指定可能</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span><span class="token punctuation">,</span> <span class="token class-name">ReadOnly</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">;</span> <span class="token comment">// カンマで繋げても書ける(上と意味は一緒)</span>

    <span class="token comment">// DllImport属性：ネイティブプラグインのメソッドを使えるようにする</span>
    <span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_IOS</span>
    <span class="token punctuation">[</span><span class="token function">DllImport</span><span class="token punctuation">(</span><span class="token string">"__Internal"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">getUsedMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>

    <span class="token comment">// Conditional属性：DEBUGシンボルがない時はメソッド呼び出しを無視出来る</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Conditional</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"DEBUG"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">属性の作成</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 属性はAttributeクラスを継承して作る。{属性名}Attribute というクラス名にするのが一般的</span>
<span class="token comment">// AttributeTargets：属性対象</span>
<span class="token comment">// AllowMultiple   ：同じ対象に複数回指定可能か</span>
<span class="token comment">// Inherited       ：継承するか(抽象クラスの時に使う)</span>
<span class="token punctuation">[</span><span class="token function">AttributeUsage</span><span class="token punctuation">(</span>AttributeTargets<span class="token punctuation">.</span>Field<span class="token punctuation">,</span> AllowMultiple <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> Inherited <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaveFieldAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Attribute</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SaveField</span></span><span class="token punctuation">]</span>            <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">;</span> <span class="token comment">// 使う時は Attribute 語尾は省略出来る</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SaveField</span><span class="token punctuation">,</span> <span class="token class-name">SaveField</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">;</span> <span class="token comment">// AllowMultiple = true ならこれが可能</span>

<span class="token comment">// ただし属性を自作することは稀。Unityの場合はほとんど拡張可能な定義済み属性を使う</span>

<span class="token comment">// Unityエディタで閲覧だけ可能にする属性(PropertyAttributeを継承することでInspector表示をカスタマイズ出来る)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadOnlyAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyAttribute</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_EDITOR</span>
<span class="token punctuation">[</span><span class="token function">CustomPropertyDrawer</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ReadOnlyAttribute</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadOnlyDrawer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyDrawer</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> position<span class="token punctuation">,</span> <span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">BeginDisabledGroup</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> property<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">EndDisabledGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">属性の操作</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// 属性はリフレクションで操作可能(属性を自作することが稀なので操作することも少ないけど)</span>
    
<span class="token comment">// SaveField属性：属性を付けたフィールドのみセーブデータの対象とする属性</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AttributeUsage</span><span class="token attribute-arguments"><span class="token punctuation">(</span>AttributeTargets<span class="token punctuation">.</span>Field<span class="token punctuation">,</span> AllowMultiple <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> Inherited <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaveFieldAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Attribute</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaveData</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SaveField</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span>    id   <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SaveField</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> name <span class="token operator">=</span> <span class="token string">"怪獣"</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span></span> comment <span class="token operator">=</span> <span class="token string">"海がみたい 人を愛したい"</span><span class="token punctuation">;</span> <span class="token comment">// コメントはセーブデータに含めない</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>        
    <span class="token class-name">SaveData</span> saveData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SaveData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> fields <span class="token operator">=</span> saveData<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetFields</span><span class="token punctuation">(</span>BindingFlags<span class="token punctuation">.</span>Instance <span class="token operator">|</span> BindingFlags<span class="token punctuation">.</span>NonPublic<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> field <span class="token keyword">in</span> fields<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// 属性が付いてたらセーブする</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>Attribute<span class="token punctuation">.</span><span class="token function">IsDefined</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">SaveFieldAttribute</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> fieldName  <span class="token operator">=</span> field<span class="token punctuation">.</span>Name<span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">var</span></span> fieldValue <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span>saveData<span class="token punctuation">)</span><span class="token punctuation">;</span>
                Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">fieldName</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">fieldValue</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// id   = 1</span>
                <span class="token comment">// name = 怪獣</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 属性を取得する場合はこう書く</span>
            <span class="token class-name"><span class="token keyword">var</span></span> saveField <span class="token operator">=</span> Attribute<span class="token punctuation">.</span><span class="token function">GetCustomAttribute</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">SaveFieldAttribute</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">SaveFieldAttribute</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">SerializeField属性を使えば、初期化コードがなくなってコード量を減らせる(Unityエディタで値を設定する)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token class-name">Story</span>         story<span class="token punctuation">;</span>
<span class="token class-name">Animation</span>     animation<span class="token punctuation">;</span>
<span class="token class-name">AudioListener</span> sound<span class="token punctuation">;</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    story     <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Story<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    animation <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sound     <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AudioListener<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// こう書ける(Unityエディタで値を設定する)</span>
<span class="token punctuation">[</span>SerializeField<span class="token punctuation">]</span> <span class="token class-name">Story</span>         story<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token class-name">Animation</span>     animation<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token class-name">AudioListener</span> sound<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>Unityはコンポーネント指向なので、<code>SerializeField</code>属性を使うのがオススメです。<br> Unityエディタで値の確認も出来るようになるので、デバッグもしやすくなります。<br> ただし名前を変えたりすると値の参照がなくなってしまうことがあるので注意が必要です(特にAssetBundle)。</p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">特別な能力を付け足すって感じだな</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">それそれ。一朝一夕では身につかないんだ。</div></div></div></div> <a href="https://tempura-kingdom.jp/squares/#ReadOnlyAttribute" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_squares_0705-320x180.jpg" class="blog-card-thumb-image wp-post-image" alt="" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">◆ Squares ◇ Unityでボクセルパズルを作ろう! 〜塗り絵アプリのその先へ〜</span><span class="blog-card-excerpt"> WebGL / Android / GitHub
マップタップ：スクエアの移動
落下地点長押し：スクエアの高速落下
画面ス...</span></div></div></a><h2><span id="MethodCallerMemberName_string_a_quotquot">呼び出し元情報：Method([CallerMemberName] string a = "")</span></h2><p>メソッド引数に<code>CallerInfo</code>属性を付けると、呼び出し元情報をコンパイラから自動取得出来ます。</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> chara   <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Character</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// コンストラクタ</span>
    <span class="token class-name"><span class="token keyword">var</span></span> charaId <span class="token operator">=</span> chara<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>        <span class="token comment">// プロパティ</span>
    chara<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// メソッド</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Character</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token operator">=&gt;</span> <span class="token function">GetId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Character</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// コンストラクタから呼び出し</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Init</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerFilePath</span></span><span class="token punctuation">]</span>   <span class="token class-name"><span class="token keyword">string</span></span> callerFilePath   <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> 
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerLineNumber</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span>    callerLineNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerMemberName</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> callerMemberName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// callerFilePath   = "/Applications/workspace/Unisharp/Assets/Unisharp/Scene.cs"</span>
        <span class="token comment">// callerLineNumber = 14</span>
        <span class="token comment">// callerMemberName = "ctor"</span>
    <span class="token punctuation">}</span>
        
    <span class="token comment">// プロパティから呼び出し</span>
    <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetId</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerFilePath</span></span><span class="token punctuation">]</span>   <span class="token class-name"><span class="token keyword">string</span></span> callerFilePath   <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> 
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerLineNumber</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span>    callerLineNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerMemberName</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> callerMemberName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// callerFilePath   = "/Applications/workspace/Unisharp/Assets/Unisharp/Scene.cs"</span>
        <span class="token comment">// callerLineNumber = 12</span>
        <span class="token comment">// callerMemberName = "Id"</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// メソッドから呼び出し</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Execute</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerFilePath</span></span><span class="token punctuation">]</span>   <span class="token class-name"><span class="token keyword">string</span></span> callerFilePath   <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> 
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerLineNumber</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">int</span></span>    callerLineNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices<span class="token punctuation">.</span>CallerMemberName</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> callerMemberName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// callerFilePath   = "/Applications/workspace/Unisharp/Assets/Unisharp/Scene.cs"</span>
        <span class="token comment">// callerLineNumber = 5</span>
        <span class="token comment">// callerMemberName = "Start"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">MVVMでメンバー名を自動取得</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Progress
<span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> progress<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">set</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// これが</span>
        <span class="token comment">// SetMember(ref progress, value, nameof(Progress));</span>

        <span class="token comment">// こう書ける</span>
        <span class="token function">SetMember</span><span class="token punctuation">(</span><span class="token keyword">ref</span> progress<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">SetMember</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token class-name">T</span> member<span class="token punctuation">,</span> <span class="token class-name">T</span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CallerMemberName</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> memberName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">ログ出力してバグを追いたい</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// どのメソッドから呼ばれた場合にバグが発生する？(発生頻度が低くてブレイクも使いづらい)</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PlayAnimation</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CallerMemberName</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> callerMethod <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>callerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// "B" と出たらBに原因がある！</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><div class="chat-zone"><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">そんなに使わないけど、バグ修正で助かったので紹介した</div></div></div><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content">頭の片隅にでも置いとくといいかもな</div></div></div></div><div class="jin-yohaku10"></div> <a href="https://tempura-kingdom.jp/m4u_after/#M4uBindableBaseSetMember" class="blog-card"><div class="blog-card-hl-box"><i class="jic jin-ifont-post"></i><span class="blog-card-hl"></span></div><div class="blog-card-box"><div class="blog-card-thumbnail"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_m4u_0705-320x180.jpg" class="blog-card-thumb-image wp-post-image" alt="" width="162" height="91"></div><div class="blog-card-content"><span class="blog-card-title">M4u 〜 あとがき</span><span class="blog-card-excerpt"> M4u 目次
MVVM 4 uGUI – uGUIにMVVM(Model-View-ViewModel)パターンを導入
...</span></div></div></a><h2><span id="define_if_region_pragma">プリプロセス：#define, #if, #region, #pragma</span></h2><p><code>#</code>で始まるコンパイラへの特別命令です。</p><p class="prism-title">#define：シンボルを定義出来る<br>#if：シンボルを使って条件付きコンパイルが出来る</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// DEBUG というシンボルを定義(ファイルの先頭で定義が必要)</span>
<span class="token comment">// シンボルは「そのファイル内だけ」有効(Unityプロジェクト全体で使いたい場合は Player Settings &gt; Scripting Define Symbols)</span>
<span class="token preprocessor property">#<span class="token directive keyword">define</span> DEBUG</span>

<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scene</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// #if DEBUG 〜 #endif で括ると DEBUG がある時だけコンパイルされる = デバッグ時以外はコードを削除出来る</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> DEBUG</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>

    <span class="token comment">// #elif, #else, &amp;&amp;, ||, ! も使える(UNITY_* はUnityで標準定義されてるシンボル)</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> (UNITY_ANDROID || UNITY_IOS) &amp;&amp; !UNITY_EDITOR</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LogMobile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">elif</span> UNITY_WEBGL &amp;&amp; !UNITY_EDITOR</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LogWeb</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">else</span></span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">#region：VisualStudioで折り畳める</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AppUtil</span>
<span class="token punctuation">{</span>
    <span class="token comment">// #region コメント 〜 #endregion で括ると、括った範囲が折り畳めるようになる</span>
    <span class="token preprocessor property">#<span class="token directive keyword">region</span> アプリ全体で使う関数</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span>Conditional</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"DEBUG"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>

    <span class="token comment">// こんな感じで用途分けに使える(ただしコードが短くなるわけではないのでやりすぎ厳禁)</span>
    <span class="token preprocessor property">#<span class="token directive keyword">region</span> ネイティブプラグイン</span>
    <span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_IOS</span>
    <span class="token punctuation">[</span><span class="token function">DllImport</span><span class="token punctuation">(</span><span class="token string">"__Internal"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">getUsedMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> <span class="token function">GetUsedMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_IOS</span>
        <span class="token keyword">return</span> <span class="token function">getUsedMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token preprocessor property">#<span class="token directive keyword">else</span></span>
        <span class="token keyword">return</span> GC<span class="token punctuation">.</span><span class="token function">GetTotalMemory</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span> Profiler<span class="token punctuation">.</span>usedHeapSizeLong<span class="token punctuation">;</span>
        <span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token punctuation">}</span>
    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">#pragma warning：警告の有効・無効を設定出来る</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// SerializeFieldで値が割り当てられてないよ警告を消す</span>
<span class="token preprocessor property">#<span class="token directive keyword">pragma</span> warning disable 649   </span><span class="token comment">// 無効</span>
<span class="token comment">//#pragma warning restore 649 // 有効</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p><code>#if</code>は不要なコードを削除出来るので、ゲームにおいては必須機能です(不正防止に繋がる)。<br> ただ個人的にはコードが汚くなりやすいので、あまり好きな機能ではありません・・・。<br> <code>#if</code>が必要なのはこんな場面(ポイントは絶対に消さないといけないコードか)。</p><p class="prism-title">デバッグコード(コードが残ってると解析された時に不正に繋がる)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">if</span> DEBUG</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DebugSkill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// デバッグ処理がたくさん書かれてる(悪意ある第三者に改竄されるとチートの危険が)</span>
<span class="token punctuation">}</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">エディタ拡張やネイティブプラグイン(物理的にコンパイルエラーが出る)</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// Unityエディタで閲覧だけ可能にする属性(#if UNITY_EDITOR で括らないとビルド出来ない)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadOnlyAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyAttribute</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_EDITOR</span>
<span class="token punctuation">[</span><span class="token function">CustomPropertyDrawer</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ReadOnlyAttribute</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadOnlyDrawer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyDrawer</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> position<span class="token punctuation">,</span> <span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">BeginDisabledGroup</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> property<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">EndDisabledGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><p>逆に、それ以外はこんな代替案もあるよーというのを上げておきます。</p><p class="prism-title">Conditional属性を使う</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> </span><span class="token return-type class-name">DEBUG</span>
Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"パイルバンカー"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>

<span class="token comment">// こう書ける</span>
<span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"パイルバンカー"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token comment">// Conditional属性を使えば、シンボルがない時にメソッド呼び出しを無視できる</span>
<span class="token comment">// 【重要】ただしLogメソッド自体は残ることに注意(メソッド内に固有処理を書かないこと)</span>
<span class="token punctuation">[</span>System<span class="token punctuation">.</span>Diagnostics<span class="token punctuation">.</span><span class="token function">Conditional</span><span class="token punctuation">(</span><span class="token string">"DEBUG"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> mes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>mes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p class="prism-title">フラグに変える</p><div class="code-toolbar"><pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token comment">// これが</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> </span><span class="token return-type class-name">TUTORIAL</span>
Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"無敵バリヤー"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>

<span class="token comment">// こう書ける</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>IsTutorial<span class="token punctuation">)</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"無敵バリヤー"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// フラグとして持てば見慣れたif文で使える</span>
<span class="token comment">// 【重要】ただしフラグは解析されて書き換えられやすいので注意(見られても問題ないものをフラグにする)</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> TUTORIAL</span>
<span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsTutorial <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">else</span></span>
<span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">bool</span></span> IsTutorial <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div><p></p><div class="chat-zone"><div class="balloon-box balloon-left balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/powerkun.png" alt="パワーくん" width="80" height="80"></div><div class="icon-name">パワーくん</div><div class="balloon-serif"><div class="balloon-content"><code>#if</code> だとコードが汚くなりやすいのか？</div></div></div><div class="balloon-box balloon-right balloon-gray balloon-bg-none clearfix"><div class="balloon-icon "><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/tempura.png" alt="てんぷら" width="80" height="80"></div><div class="icon-name">てんぷら</div><div class="balloon-serif"><div class="balloon-content">ネストが見づらかったり長いスコープが作られたり…<br>もちろん不要コードをなくすって大事なことだけど、ほんのちょっとでいいから読みやすさも大切にして欲しいな</div></div></div></div><div class="clearfix"></div><div class="adarea-box"></div><div class="share sns-design-type01"><div class="sns"><ol><li class="twitter"><a href="https://twitter.com/share?url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F&amp;text=Unity%E3%81%A8C%23%E3%81%A7%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86%E3%80%90C%231.0%E3%80%9CC%238.0%E3%80%91%20-%20%E3%81%A6%E3%82%93%E3%81%B7%E3%82%89%E7%8E%8B%E5%9B%BD&amp;via=okamura0510&amp;related=okamura0510"><i class="jic jin-ifont-twitter"></i></a></li><li class="facebook"> <a href="https://www.facebook.com/sharer.php?src=bm&amp;u=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F&amp;t=Unity%E3%81%A8C%23%E3%81%A7%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86%E3%80%90C%231.0%E3%80%9CC%238.0%E3%80%91%20-%20%E3%81%A6%E3%82%93%E3%81%B7%E3%82%89%E7%8E%8B%E5%9B%BD" onclick="javascript:window.open(this.href, &#39;&#39;, &#39;menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600&#39;);return false;"><i class="jic jin-ifont-facebook-t" aria-hidden="true"></i></a></li><li class="hatebu"> <a href="https://b.hatena.ne.jp/add?mode=confirm&amp;url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F" onclick="javascript:window.open(this.href, &#39;&#39;, &#39;menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=510&#39;);return false;"><i class="font-hatena"></i></a></li><li class="pocket"> <a href="https://getpocket.com/edit?url=https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F&amp;title=Unity%E3%81%A8C%23%E3%81%A7%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86%E3%80%90C%231.0%E3%80%9CC%238.0%E3%80%91%20-%20%E3%81%A6%E3%82%93%E3%81%B7%E3%82%89%E7%8E%8B%E5%9B%BD"><i class="jic jin-ifont-pocket" aria-hidden="true"></i></a></li><li class="line"> <a href="https://line.me/R/msg/text/?https%3A%2F%2Ftempura-kingdom.jp%2Funisharp%2F"><i class="jic jin-ifont-line" aria-hidden="true"></i></a></li></ol></div></div><section class="cta-content"> <span class="info-title">【エビでもわかる】オセロプログラミング<br>〜オセロを作りながらゲームのプログラムを学ぼう〜</span><div class="cta-text"><div class="t-aligncenter"><a href="https://zenn.dev/okamura0510/books/othello-programming" rel="noopener" target="_blank"><img decoding="async" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/othello-programming_cover.jpg" alt="" width="40%"></a></div><div style="text-align:center;margin-top:0px;margin-bottom:0px;font-size:120%">「Unityで初めてゲームを作ってみたい！」</div><p></p><p>そんな人のためにこの本を作りました。<br> オセロを一から作りながら実践形式でプログラムを学べる本です。<br> すでに完成したプロジェクトを説明するのではなく、実際に作りながら説明していきます。<br> 一緒に手を動かしながら、プログラムを覚えていきましょう🌟</p><div class="jin-yohaku10"></div><div class="jin-flexbox"><div class="jin-shortcode-button jsb-visual- jsb-hover-down"><a href="https://zenn.dev/okamura0510/books/othello-programming" target="_blank" style="background-color:#54dcef; border-radius:50px;">本を読んでみる</a></div></div></div></section></div></div></article></section><div class="toppost-list-box-simple"><section class="related-entry-section toppost-list-box-inner"><div class="related-entry-headline"><div class="related-entry-headline-text ef"><span class="fa-headline"><i class="jic jin-ifont-post" aria-hidden="true"></i>あわせて読みたい</span></div></div><div class="post-list-mag3col"><article class="post-list-item" itemscope="" itemtype="https://schema.org/BlogPosting"> <a class="post-list-link" rel="bookmark" href="https://tempura-kingdom.jp/m4u/" itemprop="mainEntityOfPage"><div class="post-list-inner"><div class="post-list-thumb" itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject"> <img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_m4u_0705.jpg" class="attachment-small_size size-small_size wp-post-image" alt="" width="368" height="207" decoding="async" loading="lazy"><meta itemprop="url" content="https://tempura-kingdom.jp/wp-content/uploads/thumbnail_m4u_0705.jpg"><meta itemprop="width" content="640"><meta itemprop="height" content="360"></div><div class="post-list-meta vcard"> <span class="post-list-cat category-unity" style="background-color:!important;" itemprop="keywords">Unity</span><h2 class="post-list-title entry-title" itemprop="headline">MVVM 4 uGUI – uGUIにMVVM(Model-View-ViewModel)パターンを導入</h2> <span class="post-list-date date updated ef" itemprop="datePublished dateModified" datetime="2015-11-07" content="2015-11-07">2015年11月7日</span> <span class="writer fn" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">tempura</span></span><div class="post-list-publisher" itemprop="publisher" itemscope="" itemtype="https://schema.org/Organization"> <span itemprop="logo" itemscope="" itemtype="https://schema.org/ImageObject"> <span itemprop="url">https://tempura-kingdom.jp/wp-content/uploads/header_sp_0705.png</span> </span> <span itemprop="name">てんぷら王国</span></div></div></div> </a></article><article class="post-list-item" itemscope="" itemtype="https://schema.org/BlogPosting"> <a class="post-list-link" rel="bookmark" href="https://tempura-kingdom.jp/statemachinebehaviour/" itemprop="mainEntityOfPage"><div class="post-list-inner"><div class="post-list-thumb" itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject"> <img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_godcontroller_0217.jpg" class="attachment-small_size size-small_size wp-post-image" alt="" width="368" height="207" decoding="async" loading="lazy"><meta itemprop="url" content="https://tempura-kingdom.jp/wp-content/uploads/thumbnail_godcontroller_0217.jpg"><meta itemprop="width" content="640"><meta itemprop="height" content="360"></div><div class="post-list-meta vcard"> <span class="post-list-cat category-unity" style="background-color:!important;" itemprop="keywords">Unity</span><h2 class="post-list-title entry-title" itemprop="headline">StateMachineBehaviourを使ってみて気づいたこと（GodControllerを修正）</h2> <span class="post-list-date date updated ef" itemprop="datePublished dateModified" datetime="2022-07-12" content="2022-07-12">2022年7月12日</span> <span class="writer fn" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">tempura</span></span><div class="post-list-publisher" itemprop="publisher" itemscope="" itemtype="https://schema.org/Organization"> <span itemprop="logo" itemscope="" itemtype="https://schema.org/ImageObject"> <span itemprop="url">https://tempura-kingdom.jp/wp-content/uploads/header_sp_0705.png</span> </span> <span itemprop="name">てんぷら王国</span></div></div></div> </a></article><article class="post-list-item" itemscope="" itemtype="https://schema.org/BlogPosting"> <a class="post-list-link" rel="bookmark" href="https://tempura-kingdom.jp/godcontroller/" itemprop="mainEntityOfPage"><div class="post-list-inner"><div class="post-list-thumb" itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject"> <img src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/thumbnail_godcontroller_0217.jpg" class="attachment-small_size size-small_size wp-post-image" alt="" width="368" height="207" decoding="async" loading="lazy"><meta itemprop="url" content="https://tempura-kingdom.jp/wp-content/uploads/thumbnail_godcontroller_0217.jpg"><meta itemprop="width" content="640"><meta itemprop="height" content="360"></div><div class="post-list-meta vcard"> <span class="post-list-cat category-unity" style="background-color:!important;" itemprop="keywords">Unity</span><h2 class="post-list-title entry-title" itemprop="headline">【GodController】スマホのマルチタッチに対応したバーチャルコントローラーを作ろう!（Unityエディタでも確認可能）</h2> <span class="post-list-date date updated ef" itemprop="datePublished dateModified" datetime="2022-02-18" content="2022-02-18">2022年2月18日</span> <span class="writer fn" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">tempura</span></span><div class="post-list-publisher" itemprop="publisher" itemscope="" itemtype="https://schema.org/Organization"> <span itemprop="logo" itemscope="" itemtype="https://schema.org/ImageObject"> <span itemprop="url">https://tempura-kingdom.jp/wp-content/uploads/header_sp_0705.png</span> </span> <span itemprop="name">てんぷら王国</span></div></div></div> </a></article></div></section></div><div class="clearfix"></div></main></div><div class="clearfix"></div><div id="breadcrumb" class="footer_type1"><ul itemscope="" itemtype="https://schema.org/BreadcrumbList"><div class="page-top-footer"><a class="totop"><i class="jic jin-ifont-arrowtop"></i></a></div><li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"> <a href="https://tempura-kingdom.jp/" itemid="https://tempura-kingdom.jp/" itemscope="" itemtype="https://schema.org/Thing" itemprop="item"> <i class="jic jin-ifont-home space-i" aria-hidden="true"></i><span itemprop="name">HOME</span> </a><meta itemprop="position" content="1"></li><li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"><i class="jic jin-ifont-arrow space" aria-hidden="true"></i><a href="https://tempura-kingdom.jp/category/unity/" itemid="https://tempura-kingdom.jp/category/unity/" itemscope="" itemtype="https://schema.org/Thing" itemprop="item"><span itemprop="name">Unity</span></a><meta itemprop="position" content="2"></li><li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"> <i class="jic jin-ifont-arrow space" aria-hidden="true"></i> <a href="https://tempura-kingdom.jp/unisharp/#" itemid="" itemscope="" itemtype="https://schema.org/Thing" itemprop="item"> <span itemprop="name">UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】</span> </a><meta itemprop="position" content="3"></li></ul></div><footer role="contentinfo" itemscope="" itemtype="https://schema.org/WPFooter"><div class="clearfix"></div><div id="footer-box"><div class="footer-inner"> <span id="privacy"><a href="https://tempura-kingdom.jp/privacy">プライバシーポリシー</a></span> <span id="law"><a href="https://tempura-kingdom.jp/law/">免責事項</a></span> <span id="copyright" itemprop="copyrightHolder"><i class="jic jin-ifont-copyright" aria-hidden="true"></i>2015–2024&nbsp;&nbsp;てんぷら王国</span></div></div><div class="clearfix"></div></footer></div></div><ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display: none !important;" data-ad-status="unfilled"><div id="aswift_0_host" style="border: none; height: 0px; width: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-block;"><iframe id="aswift_0" name="aswift_0" browsingtopics="true" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allow="attribution-reporting; run-ad-auction" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/ads.html" data-google-container-id="a!1" tabindex="0" title="Advertisement" aria-label="Advertisement" data-load-complete="true"></iframe></div></ins> <script type="text/javascript" id="contact-form-7-js-extra">var wpcf7 = {"api":{"root":"https:\/\/tempura-kingdom.jp\/wp-json\/","namespace":"contact-form-7\/v1"},"cached":"1"};</script> <script type="text/javascript" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/jquery.min.js" id="jquery-js"></script> <script type="text/javascript" id="toc-front-js-extra">var tocplus = {"visibility_show":"\u8868\u793a","visibility_hide":"\u975e\u8868\u793a","width":"Auto"};</script> <script type="text/javascript" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/swiper.min.js" id="cps-swiper-js"></script> <script>var mySwiper = new Swiper ('.swiper-container', {
		// Optional parameters
		loop: true,
		slidesPerView: 5,
		spaceBetween: 15,
		autoplay: {
			delay: 2700,
		},
		// If we need pagination
		pagination: {
			el: '.swiper-pagination',
		},

		// Navigation arrows
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev',
		},

		// And if we need scrollbar
		scrollbar: {
			el: '.swiper-scrollbar',
		},
		breakpoints: {
              1024: {
				slidesPerView: 4,
				spaceBetween: 15,
			},
              767: {
				slidesPerView: 2,
				spaceBetween: 10,
				centeredSlides : true,
				autoplay: {
					delay: 4200,
				},
			}
        }
	});
	
	var mySwiper2 = new Swiper ('.swiper-container2', {
	// Optional parameters
		loop: true,
		slidesPerView: 3,
		spaceBetween: 17,
		centeredSlides : true,
		autoplay: {
			delay: 4000,
		},

		// If we need pagination
		pagination: {
			el: '.swiper-pagination',
		},

		// Navigation arrows
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev',
		},

		// And if we need scrollbar
		scrollbar: {
			el: '.swiper-scrollbar',
		},

		breakpoints: {
			767: {
				slidesPerView: 2,
				spaceBetween: 10,
				centeredSlides : true,
				autoplay: {
					delay: 4200,
				},
			}
		}
	});</script> <div id="page-top" style="display: none;"> <a class="totop"><i class="jic jin-ifont-arrowtop"></i></a></div> <script defer="" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/autoptimize_6b033b1599b7213ef4c4acd13a065417.js"></script><link href="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/css" rel="stylesheet"><iframe src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/aframe.html" width="0" height="0" style="display: none;"></iframe></body><iframe id="google_esf" name="google_esf" src="./UnityとC#で読みやすいコードを作ろう【C#1.0〜C#8.0】｜てんぷら王国_files/zrt_lookup_fy2021.html" style="display: none;"></iframe></html>